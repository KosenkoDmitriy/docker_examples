function initNotifications(){fetchNotificationsCount(),markNotificationsAsRead(),initReactions(),listenForNotificationsBellClick(),initFilter(),initPagination(),initLoadMoreButton()}function markNotificationsAsRead(){setTimeout(function(){if(document.getElementById("notifications-container")){var e,t=window.location.pathname.split("/"),n=parseInt(t[t.length-1].replace(/[^0-9]/g,""),10);(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){};var a=document.querySelector("meta[name='csrf-token']").content;Number.isInteger(n)?e.open("Post","/notifications/reads?org_id="+n,!0):e.open("Post","/notifications/reads",!0),e.setRequestHeader("X-CSRF-Token",a),e.send()}},450)}function fetchNotificationsCount(){null==document.getElementById("notifications-container")&&checkUserLoggedIn()&&instantClick&&(InstantClick.removeExpiredKeys("force"),setTimeout(function(){InstantClick.preload(document.getElementById("notifications-link").href,"force")},30))}function initReactions(){setTimeout(function(){if(document.getElementById("notifications-container")){for(var e=document.getElementsByClassName("reaction-button"),t=0;t<e.length;t++){e[t].onclick=function(e){function t(e){"create"===e.result?n.classList.add("reacted"):n.classList.remove("reacted")}e.preventDefault(),sendHapticMessage("medium");var n=this;n.classList.add("reacted");var a=new FormData;a.append("reactable_type",n.dataset.reactableType),a.append("category",n.dataset.category),a.append("reactable_id",n.dataset.reactableId),getCsrfToken().then(sendFetch("reaction-creation",a)).then(function(e){200===e.status&&e.json().then(t)})}}for(e=document.getElementsByClassName("toggle-reply-form"),t=0;t<e.length;t++){e[t].onclick=function(e){e.preventDefault();var t=this;document.getElementById("comment-form-for-"+t.dataset.reactableId).classList.add("showing"),t.innerHTML="",setTimeout(function(){document.getElementById("comment-textarea-for-"+t.dataset.reactableId).focus()},30)}}}},180)}function listenForNotificationsBellClick(){setTimeout(function(){document.getElementById("notifications-link").onclick=function(){document.getElementById("notifications-number").classList.add("hidden")}},180)}function initFilter(){const e=document.getElementById("notifications-filter__select"),t=e=>{window.location.href=e.target.value};e&&e.addEventListener("change",t)}function initPagination(){const e=document.getElementsByClassName("notifications-paginator");if(e&&e.length>0){const t=e[e.length-1];t&&window.fetch(t.dataset.paginationPath,{method:"GET",credentials:"same-origin"}).then(function(e){200===e.status&&e.text().then(function(e){const n=e.trim();if(n){const e=document.getElementById("articles-list"),a=document.createElement("div");a.innerHTML=n,t.remove(),e.append(a),initReactions()}else{const e=document.getElementById("load-more-button");e&&(e.style.display="none"),t.remove()}})})}}function initLoadMoreButton(){const e=document.getElementById("load-more-button");e&&e.addEventListener("click",initPagination)}function fetchNext(e,t,n){var a=JSON.parse(e.dataset.params),o=Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&");if(!(o.indexOf("q=")>-1)){var i=(t+"?page="+nextPage+"&"+o+"&signature="+parseInt(Date.now()/4e5,10)).replace("&&","&");window.fetch(i).then(function(e){e.json().then(function(e){nextPage+=1,n(e),0===e.length&&(document.getElementById("loading-articles").style.display="none",done=!0)})})["catch"](function(e){console.log(e)})}}function insertNext(e,t){return function(n){document.getElementById(e.listId||"sublist");var a="";n.forEach(function(n){if(!document.getElementById((e.elId||"element")+"-"+n.id)){var o=t(n);a+=o}});document.documentElement.scrollHeight,document.body.scrollTop;var o=document.createElement("div");o.innerHTML=a;var i=document.querySelectorAll(".single-article, .crayons-story");insertAfter(o,i[i.length-1]),nextPage>0&&(fetching=!1)}}function buildFollowsHTML(e){return'<div id="follows-'+e.id+'" class="single-article">\n  <a href="'+e.path+'" class="block-link">\n    <h2>\n      <img alt="'+e.username+' profile image" src="'+e.profile_image+'" />\n        '+e.name+'\n      <span class="dashboard-username">@'+e.username+"</span>\n    </h2>\n  </a>\n</div>"}function buildTagsHTML(e){var t="";return e.points<0&&-1===negativeFollow&&(t+="<h2>Negative Tags (anti-follows)</h2>",negativeFollow=0),t+'<div id="follows-'+e.id+'" class="single-article" style="border: 1px solid '+e.color+";box-shadow: 3px 3px 0px "+e.color+'">\n   <h2>\n     <a href="/t/'+e.name+'">\n       '+e.name+'\n     </a>\n     <form class="edit_follow" id="edit_follow_'+e.id+'" action="/follows/'+e.id+'" accept-charset="UTF-8" method="post">\n       <input name="utf8" type="hidden" value="\u2713">\n       <input type="hidden" name="_method" value="patch">\n       <input type="hidden" name="authenticity_token" value="'+e.token+'">\n       <label for="follow_points">Follow Weight:</label>\n       <input step="any" required="required" type="number" value="'+e.points+'" name="follow[points]" id="follow_points">\n       <input type="submit" name="commit" value="Submit">\n     </form>\n   </h2>\n</div>'}function fetchNextFollowingPage(e){var t=JSON.parse(e.dataset.params).action;t.includes("users")?fetchNext(e,"/followings/users",insertNext({elId:"follows"},buildFollowsHTML)):t.includes("podcasts")?fetchNext(e,"/followings/podcasts",insertNext({elId:"follows"},buildFollowsHTML)):t.includes("organizations")?fetchNext(e,"/followings/organizations",insertNext({elId:"follows"},buildFollowsHTML)):fetchNext(e,"/followings/tags",insertNext({elId:"follows"},buildTagsHTML))}function fetchNextFollowersPage(e){fetchNext(e,"/api/followers/users",insertNext({elId:"follows"},buildFollowsHTML))}function buildVideoArticleHTML(e){return'<a class="single-video-article single-article" href="'+e.path+'" id="video-article-'+e.id+'">\n  <div class="video-image" style="background-image: url('+e.cloudinary_video_url+')">\n     <span class="video-timestamp">'+e.video_duration_in_minutes+"</span>\n   </div>\n   <p><strong>"+e.title+"</strong></p>\n  <p>"+e.user.name+"</p>\n</a>"}function insertVideos(e){document.getElementById("subvideos");var t="";e.forEach(function(e){if(!document.getElementById("video-article-"+e.id)){var n=buildVideoArticleHTML(e);t+=n}});document.documentElement.scrollHeight,document.body.scrollTop;var n=document.createElement("div");n.innerHTML=t,n.className+="video-collection";var a=document.querySelectorAll(".single-article, .crayons-story");insertAfter(n,a[a.length-1]),nextPage>0&&(fetching=!1)}function fetchNextVideoPage(e){fetchNext(e,"/api/videos",insertVideos)}function insertArticles(e){document.getElementById("substories");var t="",n=document.getElementById("home-articles-object");n&&(n.outerHTML=""),e.forEach(function(e){var n=document.getElementById("article-link-"+e.id);if(!["/","/top/week","/top/month","/top/year","/top/infinity","/latest"].includes(window.location.pathname)&&n&&n.parentElement&&n.parentElement.classList.contains("crayons-story")&&!document.getElementById("video-player-"+e.id))n.parentElement.outerHTML=buildArticleHTML(e);else if(!n){var a=buildArticleHTML(e);t+=a,initializeReadingListIcons()}});document.documentElement.scrollHeight,document.body.scrollTop;var a=document.createElement("div");a.classList.add("paged-stories"),a.innerHTML=t,a.addEventListener("click",e=>{const{classList:t}=e.target;if(t.contains("crayons-story")||t.contains("crayons-story__top")||t.contains("crayons-story__body")||t.contains("crayons-story__indention")||t.contains("crayons-story__title")||t.contains("crayons-story__tags")||t.contains("crayons-story__bottom")){let t=e.target,{articlePath:n}=t.dataset;for(;!n;)n=t.dataset.articlePath,t=t.parentElement;InstantClick.preload(n),InstantClick.display(n)}});var o=document.querySelectorAll(".single-article, .crayons-story");insertAfter(a,o[o.length-1]),nextPage>0&&(fetching=!1)}function fetchNextPodcastPage(e){fetchNext(e,"/api/podcast_episodes",insertArticles)}function paginate(e,t,n){const a={...{per_page:15,page:nextPage},...JSON.parse(t)};e&&e.length>0&&(a.tag_names=a.tag_names||[],a.tag_names.push(e)),a.approved="true"===n?"true":"";var o=document.getElementById("index-container");"base-feed"===o.dataset.feed?a.class_name="Article":"latest"===o.dataset.feed?(a.class_name="Article",a.sort_by="published_at"):(a.class_name="Article",a["published_at[gte]"]=o.dataset.articlesSince,a.sort_by="positive_reactions_count");const i=new URLSearchParams;Object.keys(a).forEach(e=>{const t=a[e];Array.isArray(t)?t.forEach(t=>{i.append(`${e}[]`,t)}):i.append(e,t)}),fetch(`/search/feed_content?${i.toString()}`,{method:"GET",headers:{Accept:"application/json","X-CSRF-Token":window.csrfToken,"Content-Type":"application/json"},credentials:"same-origin"}).then(e=>e.json()).then(e=>{nextPage+=1,insertArticles(e.result);const t=new CustomEvent("checkBlockedContent");window.dispatchEvent(t),initializeReadingListIcons(),0===e.result.length&&(document.getElementById("loading-articles").style.display="none",done=!0)})}function fetchNextPageIfNearBottom(){var e=document.getElementById("index-container");if(e&&!document.getElementById("query-wrapper")){var t,n,a=e.dataset.which;"podcast-episodes"===a?(n="articles-list",t=function(){fetchNextPodcastPage(e)}):"videos"===a?(n="video-collection",t=function(){fetchNextVideoPage(e)}):"followers"===a?(n="user-dashboard",t=function(){fetchNextFollowersPage(e)}):"following"===a?(n="user-dashboard",t=function(){fetchNextFollowingPage(e)}):(n="articles-list",t=function(){paginate(e.dataset.tag,e.dataset.params,e.dataset.requiresApproval)});var o=document.getElementById(n);!done&&!fetching&&window.scrollY>o.scrollHeight-3700&&(fetching=!0,t())}}function checkIfNearBottomOfPage(){document.getElementsByClassName("crayons-story").length<2&&document.getElementsByClassName("single-article").length<2||window.location.search.indexOf("q=")>-1?(document.getElementById("loading-articles").style.display="none",done=!0):document.getElementById("loading-articles").style.display="block",fetchNextPageIfNearBottom(),setInterval(function(){fetchNextPageIfNearBottom()},210)}function initScrolling(){document.getElementById("index-container")&&(initScrolling.called=!0,checkIfNearBottomOfPage())}function initializeAdditionalContentBoxes(){var e=document.getElementById("additional-content-area");if(e){var t=(new Date).getTime().toString().substring(0,4),n=userData(),a="include_sponsors";n&&!n.display_sponsors&&(a="do_not_include_sponsors"),window.fetch("/additional_content_boxes?article_id="+e.dataset.articleId+"&signature="+t+"&state="+a,{method:"GET",credentials:"same-origin"}).then(t=>{200===t.status&&t.text().then(t=>{e.innerHTML=t,initializeReadingListIcons(),initializeAllFollowButts(),initializeUserFollowButts(),initializeSponsorshipVisibility()})})}}function showChatModal(e){e.style.display="block",document.getElementById("new-message").focus()}function hideChatModal(e){e.style.display="none"}function toggleModal(){var e=document.querySelector(".modal");"none"===e.style.display?showChatModal(e):hideChatModal(e)}function initModal(){var e=document.querySelector(".modal");e.querySelector(".close-modal").addEventListener("click",toggleModal),e.querySelector(".overlay").addEventListener("click",toggleModal)}function handleChatButtonPress(e){var t=document.getElementById("new-message").value,n=JSON.parse(e.dataset.info),a=new FormData;0!==t.replace(/\s/g,"").length&&(a.append("user_id",n.id),a.append("message",t),a.append("controller","chat_channels"),getCsrfToken().then(sendFetch("chat-creation",a)).then(()=>{window.location.href=`/connect/@${n.username}`}))}function addButtonClickHandle(e,t,n){var a=document.getElementById("user-connect-redirect"),o=document.getElementById("new-message-form");t.classList.add("showing"),"open"===n.showChat&&"mutual"!==e?(a.removeAttribute("href"),t.addEventListener("click",toggleModal),t.style.display="initial",a.style.display="initial",o.onsubmit=(()=>(handleChatButtonPress(o),!1))):"mutual"===e&&(t.removeEventListener("click",toggleModal),t.style.display="initial",a.style.display="initial")}function fetchButton(e,t){var n;(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=(()=>{n.readyState===XMLHttpRequest.DONE&&200===n.status&&addButtonClickHandle(n.response,e,t)}),n.open("GET","/follows/"+t.id+"?followable_type="+t.className),n.send()}function initializeChatButton(e,t){var n=userData();null!==n&&n.id!==t.id&&fetchButton(e,t)}function initializeAllChatButtons(){var e,t=document.getElementsByClassName("chat-action-button"),n=document.getElementById("new-message-form");if(n){var a=JSON.parse(n.dataset.info);for(initModal(),e=0;e<t.length;e+=1)initializeChatButton(t[e],a)}}function initializeAllFollowButts(){for(var e=document.getElementsByClassName("follow-action-button"),t=0;t<e.length;t++)e[t].className.includes("follow-user")||initializeFollowButt(e[t])}function fetchUserFollowStatuses(e){const t=new URL("/follows/bulk_show",document.location),n=new URLSearchParams;Object.keys(e).forEach(e=>{n.append("ids[]",e)}),n.append("followable_type","User"),t.search=n,fetch(t,{method:"GET",headers:{Accept:"application/json","X-CSRF-Token":window.csrfToken,"Content-Type":"application/json"},credentials:"same-origin"}).then(e=>e.json()).then(t=>{Object.keys(t).forEach(function(n){addButtClickHandle(t[n],e[n])})})}function initializeUserFollowButtons(e){if(e.length>0){for(var t={},n=0;n<e.length;n++){if("logged-out"===document.body.getAttribute("data-user-status"))addModalEventListener(e[n]);else t[JSON.parse(e[n].dataset.info).id]=e[n]}Object.keys(t).length>0&&fetchUserFollowStatuses(t)}}function initializeUserFollowButts(){initializeUserFollowButtons(document.getElementsByClassName("follow-action-button follow-user"))}function initializeFollowButt(e){var t=userData(),n=JSON.parse(e.dataset.info);"logged-out"!==document.getElementsByTagName("body")[0].getAttribute("data-user-status")?"Tag"===n.className&&t?handleTagButtAssignment(t,e,n):"fetched"!==e.dataset.fetched&&fetchButt(e,n):addModalEventListener(e)}function addModalEventListener(e){assignState(e,"login"),e.onclick=function(e){e.preventDefault(),showModal("follow-button")}}function fetchButt(e,t){var n;e.dataset.fetched="fetched",(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&200===n.status&&addButtClickHandle(n.response,e)},n.open("GET","/follows/"+t.id+"?followable_type="+t.className,!0),n.send()}function addButtClickHandle(e,t){JSON.parse(t.dataset.info);assignInitialButtResponse(e,t),t.onclick=function(e){e.preventDefault(),handleOptimisticButtRender(t)}}function handleTagButtAssignment(e,t,n){addButtClickHandle(-1!==JSON.parse(e.followed_tags).map(function(e){return e.id}).indexOf(n.id)?"true":"false",t),shouldNotFetch=!0}function assignInitialButtResponse(e,t){t.classList.add("showing"),assignState(t,"true"===e||"mutual"===e?"unfollow":"follow-back"===e?"follow-back":"false"===e?"follow":"self"===e?"self":"login")}function handleOptimisticButtRender(e){if("self"===e.dataset.verb)window.location.href="/settings";else if("login"===e.dataset.verb)showModal("follow-button");else{try{var t=JSON.parse(e.dataset.info).id,n=e.dataset.verb;document.querySelectorAll(".follow-action-button").forEach(function(e){try{if(e.dataset.info){var a=JSON.parse(e.dataset.info).id;a&&a===t&&assignState(e,n)}}catch(o){return}})}catch(a){return}handleFollowButtPress(e)}}function handleFollowButtPress(e){var t=JSON.parse(e.dataset.info),n=new FormData;n.append("followable_type",t.className),n.append("followable_id",t.id),n.append("verb",e.dataset.verb),getCsrfToken().then(sendFetch("follow-creation",n))}function assignState(e,t){var n=JSON.parse(e.dataset.info).style;e.classList.add("showing"),"follow"===t||"follow-back"===t?(e.dataset.verb="unfollow",e.classList.remove("following-butt"),"follow-back"===t?addFollowText(e,t):"follow"===t&&addFollowText(e,n)):"login"===t?addFollowText(e,n):"self"===t?(e.dataset.verb="self",e.textContent="EDIT PROFILE"):(e.dataset.verb="follow",addFollowingText(e,n),e.classList.add("following-butt"))}function addFollowText(e,t){e.textContent="small"===t?"+":"follow-back"===t?"+ FOLLOW BACK":"+ FOLLOW"}function addFollowingText(e,t){e.textContent="small"===t?"\u2713":"\u2713 FOLLOWING"}function initializeAllTagEditButtons(){var e=document.getElementById("tag-edit-button"),t=userData();t&&e&&t.moderator_for_tags.indexOf(e.dataset.tag)>-1&&(e.style.display="inline-block",document.getElementById("tag-mod-button").style.display="inline-block")}function archivedPosts(){return document.getElementsByClassName("single-article-archived")}function showArchivedPosts(){for(var e=archivedPosts(),t=0;t<e.length;t+=1)e[t].classList.remove("hidden")}function hideArchivedPosts(){for(var e=archivedPosts(),t=0;t<e.length;t+=1)e[t].classList.add("hidden")}function toggleArchivedPosts(e){var t=e.target;t.innerHTML.match(/Show/)?(t.innerHTML="Hide Archived",showArchivedPosts()):(t.innerHTML="Show Archived",hideArchivedPosts())}function initializeArchivedPostFilter(){var e=document.getElementById("toggleArchivedLink");e&&e.addEventListener("click",toggleArchivedPosts)}function initializeArticleDate(){addLocalizedDateTimeToElementsTitles(document.querySelectorAll(".crayons-story time, article time, .single-other-article time"),"datetime")}function setReactionCount(e,t){var n=document.getElementById("reaction-butt-"+e).classList,a=document.getElementById("reaction-number-"+e);t>0?(n.add("activated"),a.textContent=t):(n.remove("activated"),a.textContent="0")}function showUserReaction(e,t){const n=document.getElementById("reaction-butt-"+e);n.classList.add("user-activated",t),n.setAttribute("aria-checked","true")}function hideUserReaction(e){const t=document.getElementById("reaction-butt-"+e);t.classList.remove("user-activated","user-animated"),t.setAttribute("aria-checked","false")}function hasUserReacted(e){return document.getElementById("reaction-butt-"+e).classList.contains("user-activated")}function getNumReactions(e){var t=document.getElementById("reaction-number-"+e).textContent;return""===t?0:parseInt(t,10)}function reactToArticle(e,t){function n(){var e=getNumReactions(t);hasUserReacted(t)?(hideUserReaction(t),setReactionCount(t,e-1)):(showUserReaction(t,"user-animated"),setReactionCount(t,e+1))}function a(){var n=new FormData;return n.append("reactable_type","Article"),n.append("reactable_id",e),n.append("category",t),n}var o=document.getElementsByTagName("body")[0].getAttribute("data-user-status");sendHapticMessage("medium"),"logged-out"!==o?(n(),document.getElementById("reaction-butt-"+t).disabled=!0,getCsrfToken().then(sendFetch("reaction-creation",a())).then(e=>200===e.status?e.json().then(()=>{document.getElementById("reaction-butt-"+t).disabled=!1}):(n(),document.getElementById("reaction-butt-"+t).disabled=!1,undefined))["catch"](()=>{n(),document.getElementById("reaction-butt-"+t).disabled=!1})):showModal("react-to-article")}function setCollectionFunctionality(){if(document.getElementById("collection-link-inbetween"))for(var e=document.getElementsByClassName("collection-link-inbetween"),t=e.length,n=0;n<e.length;n+=1)e[n].onclick=(n=>{n.preventDefault();for(var a=document.getElementsByClassName("collection-link-hidden"),o=a.length,i=0;i<o;i+=1)a[0].classList.remove("collection-link-hidden");for(var r=0;r<t;r+=1)e[0].className="collection-link-hidden"})}function requestReactionCounts(e){var t;(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=(()=>{if(t.readyState===XMLHttpRequest.DONE){var e=JSON.parse(t.response);e.article_reaction_counts.forEach(e=>{setReactionCount(e.category,e.count)}),e.reactions.forEach(e=>{document.getElementById("reaction-butt-"+e.category)&&showUserReaction(e.category,"not-user-animated")})}}),t.open("GET","/reactions?article_id="+e,!0),t.send()}function jumpToComments(){document.getElementById("jump-to-comments").onclick=(e=>{e.preventDefault(),document.getElementById("comments").scrollIntoView({behavior:"instant",block:"start"})})}function initializeArticleReactions(){setCollectionFunctionality(),setTimeout(()=>{var e=document.getElementsByClassName("article-reaction-butt");if(document.getElementById("article-body")&&e.length>0){var t=document.getElementById("article-body").dataset.articleId;requestReactionCounts(t);for(var n=0;n<e.length;n+=1)e[n].onclick=function(){reactToArticle(t,this.dataset.category)}}document.getElementById("jump-to-comments")&&jumpToComments()},3)}function initializeBaseTracking(){var e=0,t=!1,n=setInterval(function(){var a,o,i,r,s,c,l;t||(a=window,o=document,i="script",r="//www.google-analytics.com/analytics.js",s="ga",a.GoogleAnalyticsObject=s,a[s]=a[s]||function(){(a[s].q=a[s].q||[]).push(arguments)},a[s].l=1*new Date,c=o.createElement(i),l=o.getElementsByTagName(i)[0],c.async=1,c.src=r,l.parentNode.insertBefore(c,l)),t=!0,e++,window.ga&&ga.create&&(ga("create","UA-71991109-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview",location.pathname+location.search),clearInterval(n)),e>85&&(clearInterval(n),fallbackActivityRecording())},25);eventListening(),trackCustomImpressions()}function fallbackActivityRecording(){var e=document.querySelector("meta[name='csrf-token']");if(e){var t=e.getAttribute("content"),n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=window.screen.availWidth,i=window.screen.availHeight,r={path:location.pathname+location.search,user_language:navigator.language,referrer:document.referrer,user_agent:navigator.userAgent,viewport_size:a+"x"+n,screen_resolution:i+"x"+o,document_title:document.title,document_encoding:document.characterSet,document_path:location.pathname+location.search};window.fetch("/fallback_activity_recorder",{method:"POST",headers:{Accept:"application/json","X-CSRF-Token":t},body:JSON.stringify(r),credentials:"same-origin"})}}function eventListening(){var e=document.getElementById("cta-comment-register-now-link");e&&(e.onclick=function(){ga("send","event","click","register-now-click",null,null)})}function trackCustomImpressions(){setTimeout(function(){var e=document.getElementById("article-body"),t=document.querySelector("meta[name='csrf-token']"),n=/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent),a=window.innerWidth>1250,o=document.getElementById("article-show-primary-sticky-nav"),i=document.getElementById("html-variant-article-show-sidebar");if(i&&e&&t&&!n&&a){var r={html_variant_id:i.dataset.variantId,article_id:e.dataset.articleId},s=t.getAttribute("content");trackHTMLVariantTrial(r,s);for(var c=o.querySelectorAll("a,button"),l=0;l<c.length;l++)c[l].addEventListener("click",function(){trackHtmlVariantSuccess(r,s)})}var d=document.getElementById("html-variant-article-show-below-article");if(d&&e&&t&&!n&&a){r={html_variant_id:d.dataset.variantId,article_id:e.dataset.articleId},s=t.getAttribute("content");trackHTMLVariantTrial(r,s);for(c=d.querySelectorAll("a,button"),l=0;l<c.length;l++)c[l].addEventListener("click",function(){trackHtmlVariantSuccess(r,s)})}if(e&&t&&!n){var u=Math.floor(10*Math.random());if(!checkUserLoggedIn()&&1!=u)return;r={article_id:e.dataset.articleId,referrer:document.referrer,user_agent:navigator.userAgent},s=t.getAttribute("content");trackPageView(r,s);var m=0,f=setInterval(function(){m++;var e=document.getElementById("article-body");e&&checkUserLoggedIn()?trackFifteenSecondsOnPage(e.dataset.articleId,s):clearInterval(f),m>118&&clearInterval(f)},15e3)}var g=document.getElementById("sponsorship-arbitrary-display-widget");g&&t&&!n&&a&&checkUserLoggedIn()&&(trackAdImpression(s=t.getAttribute("content"),g),g.removeEventListener("click",trackAdClick,!1),g.addEventListener("click",function(){trackAdClick(s,g)}))},1800)}function trackHTMLVariantTrial(e,t){1===Math.floor(10*Math.random())&&window.fetch("/html_variant_trials",{method:"POST",headers:{"X-CSRF-Token":t,"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"same-origin"})}function trackHtmlVariantSuccess(e,t){window.fetch("/html_variant_successes",{method:"POST",headers:{"X-CSRF-Token":t,"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"same-origin"})}function trackPageView(e,t){window.fetch("/page_views",{method:"POST",headers:{"X-CSRF-Token":t,"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"same-origin"})}function trackFifteenSecondsOnPage(e,t){window.fetch("/page_views/"+e,{method:"PATCH",headers:{"X-CSRF-Token":t,"Content-Type":"application/json"},credentials:"same-origin"})}function trackAdImpression(e,t){var n={display_ad_event:{display_ad_id:t.dataset.id,context_type:"home",category:"impression"}};window.fetch("/display_ad_events",{method:"POST",headers:{"X-CSRF-Token":e,"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"same-origin"})}function trackAdClick(e,t){if(!adClicked){var n={display_ad_event:{display_ad_id:t.dataset.id,context_type:"home",category:"click"}};window.fetch("/display_ad_events",{method:"POST",headers:{"X-CSRF-Token":e,"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"same-origin"})}adClicked=!0}function initializeUserProfileContent(e){document.getElementById("sidebar-profile--avatar").src=e.profile_image_90,document.getElementById("sidebar-profile--avatar").alt=e.username,document.getElementById("sidebar-profile--name").innerHTML=filterXSS(e.name),document.getElementById("sidebar-profile--username").innerHTML="@"+e.username,document.getElementById("sidebar-profile").href="/"+e.username}function initializeUserSidebar(e){if(!document.getElementById("sidebar-nav"))return;initializeUserProfileContent(e);let t=JSON.parse(e.followed_tags);const n=0===t.length?"Follow tags to improve your feed":"Other Popular Tags";t.forEach(e=>{const t=document.getElementById("default-sidebar-element-"+e.name);t&&t.remove()}),document.getElementById("tag-separator").innerHTML=n,document.getElementById("sidebar-nav-default-tags").classList.add("showing")}function addRelevantButtonsToArticle(e){var t=document.getElementById("article-show-container");if(t)if(parseInt(t.dataset.authorId,10)===e.id){let n=[`<a href="${t.dataset.path}/edit" rel="nofollow">EDIT</a>`];!0===JSON.parse(t.dataset.published)&&n.push(`<a href="${t.dataset.path}/manage" rel="nofollow">MANAGE</a>`),e.pro&&n.push(`<a href="${t.dataset.path}/stats" rel="nofollow">STATS</a>`),document.getElementById("action-space").innerHTML=n.join("")}else e.trusted&&(document.getElementById("action-space").innerHTML='<a href="'+t.dataset.path+'/mod" rel="nofollow">MODERATE <span class="post-word">POST</span></a>')}function addRelevantButtonsToComments(e){if(document.getElementById("comments-container")){var t=document.getElementsByClassName("comment-actions");for(let n=0;n<t.length;n+=1){let a=t[n];const{action:o,commentableUserId:i,userId:r}=a.dataset;parseInt(r,10)===e.id&&(a.style.display="inline-block"),"hide-button"===o&&parseInt(i,10)===e.id&&(a.style.display="inline-block",a.classList.remove("hidden"))}if(e.trusted){var n=document.getElementsByClassName("mod-actions");for(let e=0;e<n.length;e+=1){let t=n[e];t.className="mod-actions",t.style.display="inline-block"}}}}function initializeBaseUserData(){const e=userData(),t=document.getElementById("first-nav-link");t.href=`/${e.username}`,t.querySelector("span").textContent=e.name,t.querySelector("small").textContent=`@${e.username}`,document.getElementById("nav-profile-image").src=e.profile_image_90,initializeUserSidebar(e),addRelevantButtonsToArticle(e),addRelevantButtonsToComments(e)}function removeExistingCSRF(){var e=document.querySelector("meta[name='csrf-token']"),t=document.querySelector("meta[name='csrf-param']");e&&t&&(e.parentNode.removeChild(e),t.parentNode.removeChild(t))}function fetchBaseData(){var e;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=(()=>{if(e.readyState===XMLHttpRequest.DONE){var t=JSON.parse(e.responseText);t.token&&removeExistingCSRF();var n=document.createElement("meta");n.name="csrf-param",n.content=t.param,document.getElementsByTagName("head")[0].appendChild(n);var a=document.createElement("meta");a.name="csrf-token",a.content=t.token,document.getElementsByTagName("head")[0].appendChild(a),document.getElementsByTagName("body")[0].dataset.loaded="true",checkUserLoggedIn()&&(document.getElementsByTagName("body")[0].dataset.user=t.user,browserStoreCache("set",t.user),setTimeout(()=>{"function"==typeof ga&&ga("set","userId",JSON.parse(t.user).id)},400))}}),e.open("GET","/async_info/base_data",!0),e.send()}function initializeBodyData(){fetchBaseData()}function initializeCommentDate(){addLocalizedDateTimeToElementsTitles(document.querySelectorAll(".comment-date time"),"datetime")}function initializeCommentDropdown(){function e(){return"undefined"!=typeof navigator.clipboard&&null!==navigator.clipboard}function t(){return"DEV-Native-android"===navigator.userAgent&&"undefined"!=typeof AndroidBridge&&null!==AndroidBridge}function n(e){return t=>t.classList.remove(e)}function a(e){return Array.from(document.getElementsByClassName(e))}function o(){const{activeElement:e}=document,t="clipboard-copy"===e.localName?e.querySelector("input"):document.getElementById("article-copy-link-input");t.focus(),t.setSelectionRange(0,t.value.length),p.hidden=!1}function i(){p&&(p.hidden=!0)}function r(){o(),document.execCommand("copy")}function s(){const n=document.getElementById("article-copy-link-input").value;t()?(AndroidBridge.copyToClipboard(n),o()):e()?navigator.clipboard.writeText(n).then(()=>{o()})["catch"](()=>{r()}):r()}function c(e){return!(e.target.matches(".dropdown-icon")||e.target.matches(".dropbtn")||e.target.matches("clipboard-copy")||e.target.matches("clipboard-copy input")||e.target.matches("clipboard-copy img")||e.target.parentElement.classList.contains("dropdown-link-row"))}function l(){document.removeEventListener("click",m)}function d(){const e=document.getElementsByTagName("clipboard-copy")[0];e&&e.removeEventListener("click",s)}function u(){a("showing").forEach(n("showing"))}function m(e){c(e)&&(u(),i(),l())}function f(e){var t=e.target.parentElement.parentElement.getElementsByClassName("dropdown-content")[0];if(t.classList.contains("showing"))t.classList.remove("showing"),l(),d(),i();else{u(),t.classList.add("showing");const e=document.getElementsByTagName("clipboard-copy")[0];document.addEventListener("click",m),e&&e.addEventListener("click",s)}}function g(e){e.addEventListener("click",f)}const p=document.getElementById("article-copy-link-announcer");setTimeout(function(){a("dropbtn").forEach(g)},100)}function getAndShowPreview(e,t){function n(n){e.classList.toggle("preview-toggle"),t.classList.toggle("preview-loading"),t.classList.toggle("preview-toggle"),e.innerHTML=n.processed_html,activateRunkitTags()}const a=JSON.stringify({comment:{body_markdown:t.value}});getCsrfToken().then(sendFetch("comment-preview",a)).then(e=>e.json()).then(n)["catch"](e=>{console.log("error!"),console.log(e)})}function handleCommentPreview(e){e.preventDefault();const{form:t}=e.target,n=t.querySelector("textarea");if(""!==n.value){const e=t.querySelector(".comment-preview-div"),a=t.querySelector(".comment-action-preview");a.innerHTML.indexOf("PREVIEW")>-1?(n.classList.toggle("preview-loading"),getAndShowPreview(e,n),a.innerHTML="MARKDOWN"):(e.classList.toggle("preview-toggle"),n.classList.toggle("preview-toggle"),a.innerHTML="PREVIEW")}}function initializeCommentPreview(){const e=document.getElementById("preview-button");e&&e.addEventListener("click",handleCommentPreview)}function initializeCommentsPage(){if(document.getElementById("comments-container")){toggleCodeOfConduct();var e=document.getElementById("comments-container").dataset.commentableId,t=document.getElementById("comments-container").dataset.commentableType;commentableIdList=e.split(",");(function(){for(var e=0;e<commentableIdList.length;e++)!function(e){var n;(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){for(var e=JSON.parse(n.response),t=e.reactions,a=document.getElementsByClassName("single-comment-node"),o=e.positive_reaction_counts,i=0;i<t.length;i++){(r=document.getElementById("button-for-comment-"+t[i].reactable_id))&&r.classList.add("reacted")}for(i=0;i<o.length;i++){var r
;(r=document.getElementById("button-for-comment-"+o[i].id))&&o[i].count>0&&(document.getElementById("reactions-count-"+o[i].id)?document.getElementById("reactions-count-"+o[i].id).innerHTML=o[i].count:r.innerHTML=r.innerHTML+"<span class='reactions-count' id='reactions-count-"+o[i].id+"'>"+o[i].count+"</span>")}for(i=0;i<a.length;i++)if(a[i].dataset.commentAuthorId==e.current_user.id){a[i].dataset.currentUserComment="true";var s=a[i].children[0].children[2].children[0],c=document.getElementById("button-for-comment-"+a[i].dataset.commentId);s&&c&&(s.className="current-user-actions",s.style.display="inline-block",document.getElementById("button-for-comment-"+a[i].dataset.commentId).classList.add("reacted"))}}},n.open("GET","/reactions?commentable_id="+commentableIdList[e]+"&commentable_type="+t,!0),n.send()}(e)})();for(var n=document.getElementsByClassName("reaction-button"),a=0;a<n.length;a++){n[a].onclick=function(e){function t(e){var t=n.children[2];"create"===e.result?(n.classList.add("reacted"),t&&(t.innerHTML=parseInt(t.innerHTML)+1)):(n.classList.remove("reacted"),t&&(t.innerHTML=parseInt(t.innerHTML)-1))}var n=this;if(e.preventDefault(),sendHapticMessage("medium"),"logged-out"!==document.getElementsByTagName("body")[0].getAttribute("data-user-status")){n.classList.add("reacted"),n.disabled=!0;var a=new FormData;a.append("reactable_type","Comment"),a.append("reactable_id",n.dataset.commentId),getCsrfToken().then(sendFetch("reaction-creation",a)).then(function(e){n.disabled=!1,200===e.status&&e.json().then(t)})}else showModal("react-to-comment")}}var o=document.getElementsByClassName("toggle-reply-form");for(a=0;a<o.length;a++){o[a].onclick=function(n){if(n.preventDefault(),n.target.classList.contains("thread-indication"))return!1;if("logged-out"!=document.getElementsByTagName("body")[0].getAttribute("data-user-status")){var a=n.target.parentNode,o=a.dataset.commentId;document.getElementById("button-for-comment-"+a.dataset.commentId).style.zIndex="5";var i=setInterval(function(){document.querySelector("meta[name='csrf-token']")&&(clearInterval(i),a.innerHTML=buildCommentFormHTML(e,t,o),setTimeout(function(){a.getElementsByTagName("textarea")[0].focus()},30))},1);return!1}showModal("reply-to-comment")}}var i=document.getElementsByClassName("edit-butt");for(a=0;a<i.length;a++){i[a].onclick=function(){}}document.getElementById("new_comment")&&document.getElementById("new_comment").addEventListener("submit",handleCommentSubmit)}listenForDetailsToggle()}function toggleCodeOfConduct(){var e=userData();if(e){var t=e.checked_code_of_conduct,n=e.number_of_comments,a=document.getElementById("toggle-code-of-conduct-checkbox");a&&!t&&n<1&&(a.innerHTML='<input type="checkbox" name="checked_code_of_conduct" class="checkbox" required/>                                  <label for="checked_code_of_conduct">I\'ve read the <a href="https://dev.to/code-of-conduct">code of conduct</a></label>')}}function replaceActionButts(e){var t="",n=e.getElementsByClassName("actions")[0];"true"==e.dataset.currentUserComment&&(t='<a data-no-instant href="'+e.parentNode.parentNode.dataset.path+'/delete_confirm" class="edit-butt">DELETE</a>                            <a href="'+e.parentNode.parentNode.dataset.path+'/edit">EDIT</a>'),n.innerHTML='<span class="current-user-actions">'+t+'</span><a href="#" class="toggle-reply-form">REPLY</a>'}function warmNewCommentsArea(){if("/notifications"!==window.location.pathname){var e="/stories/warm_comments"+window.location.pathname;window.fetch(e)}}function handleCommentSubmit(e){e.preventDefault();var t=e.target;t.classList.add("submitting");var n=document.getElementById("comment-node-"+e.target.dataset.commentId),a=JSON.stringify({comment:{body_markdown:t.getElementsByTagName("textarea")[0].value,commentable_id:t.querySelector("#comment_commentable_id").value,commentable_type:t.querySelector("#comment_commentable_type").value,parent_id:t.querySelector("#comment_parent_id")?t.querySelector("#comment_parent_id").value:null}});return getCsrfToken().then(sendFetch("comment-creation",a)).then(function(e){return 200===e.status?e.json().then(function(e){var a=document.createElement("div");a.innerHTML=buildCommentHTML(e);var o=document.getElementsByTagName("body")[0],i=JSON.parse(o.getAttribute("data-user"));i.checked_code_of_conduct=!0,o.dataset.user=JSON.stringify(i);var r=t.getElementsByClassName("code-of-conduct")[0];r&&(r.innerHTML="");var s=document.getElementById("new_comment");if(n){replaceActionButts(n),e.depth>2&&(n.getElementsByClassName("toggle-reply-form")[0].innerHTML="");var c=n.getElementsByClassName("inner-comment")[0];c.parentNode.insertBefore(a,c.nextSibling)}else if(s){(s=document.getElementById("new_comment")).classList.remove("submitting");const t=document.getElementById("text-area");t.classList="",t.value=e.comment_template||"";var l=document.getElementById("preview-div");l.classList.add("preview-toggle"),l.innerHTML="";var d=document.getElementById("comment-trees-container");d.insertBefore(a,d.firstChild)}else if(document.getElementById("notifications-container")){var u=document.createElement("span");u.innerHTML='<div class="reply-sent-notice">Reply sent \u2014 <a href="'+e.url+'">Check it out</a></div>',t.replaceWith(u)}else window.location.replace(e.url);warmNewCommentsArea(),initializeCommentsPage(),initializeCommentDate(),initializeCommentDropdown(),activateRunkitTags()}):e.json().then(function(e){return t.classList.remove("submitting"),window.alert(e.error),!1}),!1}),!1}function handleFocus(e){var t=document.getElementsByTagName("body")[0].getAttribute("data-user-status"),n=e.target;"logged-out"==t?(e.preventDefault(),showModal("reply-to-comment"),n.blur(),setTimeout(function(){n.blur(),showModal("reply-to-comment")},100)):handleSizeChange(e)}function handleBlur(){setTimeout(function(){var e=document.getElementById("text-area");0==e.value.length&&(e.className="")},100)}function handleKeyUp(e){handleSizeChange(e)}function handleSubmit(e){var t=userData();if(t&&(t.number_of_comments>=1&&""!==e.target.value.trim())){var n=e.target.parentElement.parentElement.id||e.target.parentElement.id;document.querySelector("#"+n+' input[type="submit"].comment-action-button').click()}}function handleBoldAndItalic(e){var t=e.target,n=t.value.substring(t.selectionStart,t.selectionEnd),a=t.selectionStart,o=e.keyCode===KEY_CODE_B?"**":"_";replaceSelectedText(t,`${o}${n}${o}`);var i=a+o.length;t.setSelectionRange(i,i+n.length)}function handleLink(e){var t=e.target,n=t.value.substring(t.selectionStart,t.selectionEnd),a=t.selectionStart;replaceSelectedText(t,`[${n}](url)`);var o=a+n.length+3,i=o+3;t.setSelectionRange(o,i)}function replaceSelectedText(e,t){document.execCommand("insertText",!1,t)||"function"==typeof e.setRangeText&&e.setRangeText(t)}function handleKeyDown(e){if(e.ctrlKey||e.metaKey)switch(e.keyCode){case KEY_CODE_B:case KEY_CODE_I:e.preventDefault(),handleBoldAndItalic(e);break;case KEY_CODE_K:e.preventDefault(),handleLink(e);break;case ENTER_KEY_CODE:e.preventDefault(),handleSubmit(e)}}function handleSizeChange(e){var t=e.target.value.split(/\r*\n/).length;document.getElementById("text-area").className=t>11?"embiggened-max":t>6?"embiggened-more":"embiggened"}function validateField(e){document.getElementById("text-area")&&(""==document.getElementById("text-area").value&&e.preventDefault())}function generateUploadFormdata(e){var t=document.querySelector("meta[name='csrf-token']").content,n=new FormData;return n.append("authenticity_token",t),n.append("image",e[0]),n}function handleImageUpload(e,t){document.getElementById("comments-container").dataset.commentableId;e.preventDefault(),document.getElementById("image-upload-"+t).click(),document.getElementById("image-upload-"+t).onchange=function(){document.getElementById("image-upload-"+t).files.length>0&&(document.getElementById("image-upload-file-label-"+t).style.color="#888888",document.getElementById("image-upload-file-label-"+t).innerHTML="Uploading...",document.getElementById("image-upload-submit-"+t).value="uploading",setTimeout(function(){document.getElementById("image-upload-submit-"+t).click(function(){})},50))},document.getElementById("image-upload-submit-"+t).onclick=function(e){e.preventDefault();var n=document.getElementById("image-upload-"+t).files;n.length>0&&getCsrfToken().then(sendFetch("image-upload",generateUploadFormdata(n))).then(function(e){200===e.status?e.json().then(function(e){var n=document.getElementById("uploaded-image-"+t),a=(document.getElementById("image-upload-button-"+t),document.getElementById("image-upload-file-label-"+t));a.style.display="none",n.value=e.links[0],n.classList.add("showing"),n.select();var o="Uploaded! Paste into editor";a.innerHTML=o,a.style.color="#00c673",a.style.position="relative",a.style.top="5px"}):e.json().then(function(e){var n=e.error||"Invalid file!";document.getElementById("image-upload-file-label-"+t).innerHTML=n,document.getElementById("image-upload-file-label-"+t).style.color="#e05252",document.getElementById("image-upload-submit-"+t).style.display="none"})})["catch"](function(){})}}function listenForDetailsToggle(){for(var e=document.getElementsByTagName("DETAILS"),t=0;t<e.length;t++)e[t].addEventListener("toggle",e=>{var t=e.target,n=t.getElementsByTagName("SPAN")[0],a=t.getElementsByClassName("comment-username"),o="";a.length>1&&(o=" + "+(a.length-1)+" replies");var i=a[0].textContent+o;t.open?n.innerHTML="&nbsp;":n.innerHTML=i,t.getElementsByTagName("SUMMARY")[0].blur()})}function initializeCreditsPage(){localizeTimeElements(document.querySelectorAll(".ledger time"),{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function initializeDashboardSort(){document.getElementById("dashhboard_sort")&&document.getElementById("dashhboard_sort").addEventListener("change",e=>{window.location="/dashboard?sort="+e.target.value})}function initializeDrawerSliders(){initializeSwipeGestures.called||(swipeState="middle",initializeSwipeGestures()),document.getElementById("on-page-nav-controls")&&(document.getElementById("sidebar-bg-left")&&(document.getElementById("sidebar-bg-left").onclick=function(){swipeState="middle",slideSidebar("left","outOfView")}),document.getElementById("sidebar-bg-right")&&(document.getElementById("sidebar-bg-right").onclick=function(){swipeState="middle",slideSidebar("right","outOfView")}),document.getElementById("on-page-nav-butt-left")&&(document.getElementById("on-page-nav-butt-left").onclick=function(){swipeState="left",slideSidebar("left","intoView")}),document.getElementById("on-page-nav-butt-right")&&(document.getElementById("on-page-nav-butt-right").onclick=function(){swipeState="right",slideSidebar("right","intoView")}),InstantClick.on("change",function(){document.getElementsByTagName("body")[0].classList.remove("modal-open"),slideSidebar("right","outOfView"),slideSidebar("left","outOfView")}),listenForNarrowMenuClick())}function listenForNarrowMenuClick(){for(var e=document.getElementsByClassName("narrow-nav-menu"),t=document.getElementById("narrow-feed-butt"),n=0;n<e.length;n++)document.getElementById("narrow-nav-menu").classList.remove("showing");t&&(t.onclick=function(){document.getElementById("narrow-nav-menu").classList.add("showing")});for(n=0;n<e.length;n++)e[n].onclick=function(){document.getElementById("narrow-nav-menu").classList.remove("showing")}}function getFormValues(e){for(var t=e.action.match(/\/(\d+)$/)[1],n=e.querySelectorAll("input"),a={id:t,article:{}},o=0;o<n.length;o+=1){var i=n[o],r=i.getAttribute("name"),s=i.getAttribute("value");if(r.match(/\[(.*)\]/)){var c=r.match(/\[(.*)\]$/)[1];a.article[c]=s}else a[r]=s}return a}function toggleArchived(e,t){"true"===t?e.classList.add("single-article-archived","hidden"):e.classList.remove("single-article-archived")}function toggleNotifications(e,t){"Mute Notifications"===t?e.setAttribute("value","Receive Notifications"):e.setAttribute("value","Mute Notifications")}function onXhrSuccess(e,t,n){if(n.article.archived)toggleArchived(t,n.article.archived);else{var a=e.querySelector('input[type="submit"]');toggleNotifications(a,a.getAttribute("value"))}t.querySelector("ul.ellipsis-menu").classList.add("hidden")}function handleFormSubmit(e){e.preventDefault(),e.stopPropagation();var t=e.target,n=getFormValues(t),a=JSON.stringify(n),o=new FormData(t).get("_method")||"post",i=new XMLHttpRequest;i.open(o.toUpperCase(),t.action),i.setRequestHeader("Content-Type","application/json"),i.send(a),i.onload=function(){var e=t.closest("div.single-article");if(200===i.status){onXhrSuccess(t,e,n);var a="Mute Notifications"===n.commit?"Notifications Muted":"Notifications Restored";e.querySelector(".dashboard-meta-details").innerHTML=a}else e.querySelector(".dashboard-meta-details").innerHTML="Failed to update article."}}function initializeFormSubmit(){for(var e=document.querySelectorAll("ul.ellipsis-menu > li > form"),t=0;t<e.length;t+=1)e[t].addEventListener("submit",handleFormSubmit)}function getMenu(e){return e.closest("div.ellipsis-menu").querySelector("ul.ellipsis-menu")}function hideIfNotAlreadyHidden(e){e.classList.contains("hidden")||e.classList.add("hidden")}function hideAllEllipsisMenusExcept(e){for(var t=document.querySelectorAll("ul.ellipsis-menu"),n=0;n<t.length;n+=1)t[n]!==e&&hideIfNotAlreadyHidden(t[n])}function hideEllipsisMenus(e){if(!e.target.closest("div.ellipsis-menu"))for(var t=document.querySelectorAll("ul.ellipsis-menu"),n=0;n<t.length;n+=1)hideIfNotAlreadyHidden(t[n])}function toggleEllipsisMenu(e){var t=getMenu(e.target);hideAllEllipsisMenusExcept(t),t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden")}function initializeEllipsisMenuToggle(){for(var e=document.getElementsByClassName("ellipsis-menu-btn"),t=0;t<e.length;t+=1)e[t].addEventListener("click",toggleEllipsisMenu);const n=document.getElementsByTagName("body")[0];n&&n.addEventListener("click",hideEllipsisMenus)}function initializeEllipsisMenu(){initializeEllipsisMenuToggle(),initializeFormSubmit()}function initializeFooterMod(){var e=document.getElementById("footer-container"),t=document.getElementById("page-content");e&&t&&t.className.indexOf("stories-show")>-1&&!document.getElementById("IS_CENTERED_PAGE")?document.getElementById("footer-container").classList.remove("centered-footer"):e&&document.getElementById("footer-container").classList.add("centered-footer")}function initializeHeroBannerClose(){let e=document.getElementById("hero-html-wrapper"),t=document.getElementById("js-hero-banner__x");e&&t&&t.addEventListener("click",()=>{localStorage.setItem("exited_hero",e.dataset.name),e.style.display="none"})}function initializeLocalStorageRender(){try{var e=browserStoreCache("get");e&&(document.getElementsByTagName("body")[0].dataset.user=e,initializeBaseUserData(),initializeReadingListIcons(),initializeAllFollowButts(),initializeUserFollowButts(),initializeSponsorshipVisibility())}catch(t){browserStoreCache("remove")}}function initializeOnboardingTaskCard(){if("yes"!==localStorage.getItem("task-card-closed")){var e=document.getElementsByClassName("onboarding-task-card")[0];if(null!=e){var t=new Date(userData().created_at),n=new Date;t>n.setDate(n.getDate()-7)&&(e.style.display="block")}}}function initializePWAFunctionality(){if((window.matchMedia("(display-mode: standalone)").matches||window.frameElement)&&(document.getElementById("pwa-nav-buttons").classList.add("pwa-nav-buttons--showing"),document.getElementById("app-back-button").onclick=(e=>{e.preventDefault(),window.history.back()}),document.getElementById("app-forward-button").onclick=(e=>{e.preventDefault(),window.history.forward()}),document.getElementById("app-refresh-button").onclick=(e=>{e.preventDefault(),window.location.reload()}),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|DEV-Native-ios/i.test(navigator.userAgent)))for(var e=window.location.protocol+"//"+window.location.host,t=document.getElementsByTagName("a"),n=0,a=t.length;n<a;n++){var o=t[n];0===o.href.indexOf(e+"/")||0===o.href.indexOf("/")||(o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer"))}}function initializePodcastPlayback(){function e(e){return document.getElementById(e)}function t(e){return document.getElementsByClassName(e)}function n(){return window.name||(window.name=Math.random()),{html:document.getElementById("audiocontent").innerHTML,currentTime:0,playing:!1,muted:!1,volume:1,duration:1,updated:(new Date).getTime(),windowName:window.name}}function a(){try{var e=JSON.parse(localStorage.getItem("media_playback_state_v2"));return e&&window.name===e.windowName?e:n()}catch(t){return console.log(t),n()}}function o(){var t=e("audio"),n=a();return t&&n.playing}function i(){return e(`record-${window.activeEpisode}`)}function r(t){o()&&i()&&(e(`record-${window.activeEpisode}`).classList.add("playing"),E(t))}function s(){window.activeEpisode&&e(`record-${window.activeEpisode}`)&&(e(`record-${window.activeEpisode}`).classList.remove("playing"),window.activeEpisode=undefined)}function c(){var e=t("record-wrapper"),n=t("podcastliquidtag__record");return e.length>0?e:n}function l(){return d()||u()}function d(){return"DEV-Native-ios"===navigator.userAgent}function u(){return"DEV-Native-android"===navigator.userAgent&&"undefined"!=typeof AndroidBridge&&null!==AndroidBridge&&AndroidBridge.metadataPodcast!==undefined}function m(e){var t=e||a(),o=n();return o.currentTime=t.currentTime,o.playing=t.playing,o.muted=t.muted,o.volume=t.volume,o.duration=t.duration,localStorage.setItem("media_playback_state_v2",JSON.stringify(o)),o}function f(e){try{window&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.podcast&&window.webkit.messageHandlers.podcast.postMessage(e)}catch(t){console.log(t.message)}}function g(t){var n=a();e("barPlayPause").onclick=function(){A(t)},e("mutebutt").onclick=function(){x(t)},e("volbutt").onclick=function(){x(t)},e("bufferwrapper").onclick=function(e){H(e,t)},e("volumeslider").value=100*n.volume,e("volumeslider").onchange=function(e){N(e,t)},e("speed").onclick=function(){w(t)},e("closebutt").onclick=function(){P(t)}}function p(t){return-1!==e("audiocontent").innerHTML.indexOf(`${t}`)}function h(e){return function(){var t=0;e.currentTime>0&&(t=e.buffered.end(e.buffered.length-1)/e.duration*100);M(e.currentTime,e.duration,t)}}function y(e){d()?f({action:"load",url:e.querySelector("source").src}):u()?AndroidBridge.loadPodcast(e.querySelector("source").src):e.load()}function v(t){e("audiocontent").innerHTML=e(`hidden-audio-${t}`).innerHTML;var n=e("audio");n.addEventListener("timeupdate",h(n),!1),y(n),A(n),g(n)}function b(){var t=c();Array.prototype.forEach.call(t,function(t){var n=t.getAttribute("data-episode");t.getAttribute("data-podcast");t.onclick=function(){if(p(n)){var t=e("audio");t&&A(t)}else s(),v(n)}})}function w(t){var n=a(),o=e("speed"),i=parseFloat(o.getAttribute("data-speed"));2===i?(o.setAttribute("data-speed",.5),o.innerHTML="0.5x",n.playbackRate=.5):(o.setAttribute("data-speed",i+.5),o.innerHTML=i+.5+"x",n.playbackRate=i+.5),m(n),d()?f({action:"rate",rate:n.playbackRate.toString()}):u()?AndroidBridge.ratePodcast(n.playbackRate):t.playbackRate=n.playbackRate}function E(t){var n=e(`status-message-${window.activeEpisode}`);n?t?(n.classList.add("showing"),n.innerHTML=t):n.classList.remove("showing"):"initializing..."===t&&document.querySelector(".status-message")&&(document.querySelector(".status-message").innerHTML=t)}function k(){e("barPlayPause").classList.add("playing"),e("progressBar").classList.add("playing"),e("animated-bars").classList.add("playing")}function _(){e("barPlayPause").classList.remove("playing"),e("animated-bars").classList.remove("playing")}function T(e){d()?f({action:"play",seconds:e}):AndroidBridge.playPodcast(e)}function B(e){return new Promise(function(t,n){var o=a();l()?(T(o.currentTime.toString()),F(!0),t()):(e.currrentTime=o.currentTime,e.play().then(function(){F(!0),t()})["catch"](function(e){console.log(e),F(!1),n()}))})}function I(){var e=t("podcast-episode-container")[0];return e===undefined&&(e=t("podcastliquidtag")[0]),e.dataset.meta}function L(){try{var e=JSON.parse(I()),t={action:"metadata",episodeName:e.episodeName,podcastName:e.podcastName,podcastImageUrl:e.podcastImageUrl};d()?f(t):AndroidBridge.metadataPodcast(e.episodeName,e.podcastName,e.podcastImageUrl)}catch(n){console.log("Unable to load Podcast Episode metadata",n)}}function S(e){l()&&L(),B(e).then(function(){r(),k()})["catch"](function(){B(e),setTimeout(function(){r("initializing..."),k()},5)})}function C(e){d()?f({action:"pause"}):u()?AndroidBridge.pausePodcast():e.pause(),F(!1),s(),_()}function A(e){window.activeEpisode=e.getAttribute("data-episode"),window.activePodcast=e.getAttribute("data-podcast"),a().playing?(ga("send","event","click","pause podcast",`${window.activePodcast} ${window.activeEpisode}`,null),C(e),E(null)):(ga("send","event","click","play podcast",`${window.activePodcast} ${window.activeEpisode}`,null),E("initializing..."),S(e))}function x(t){var n=a();e("mutebutt").classList.add(n.muted?"hidden":"showing"),e("volumeindicator").classList.add(n.muted?"showing":"hidden"),e("mutebutt").classList.remove(n.muted?"showing":"hidden"),e("volumeindicator").classList.remove(n.muted?"hidden":"showing"),n.muted=!n.muted,d()?f({action:"muted",muted:n.muted.toString()}):u()?AndroidBridge.mutePodcast(n.muted):t.muted=n.muted,m(n)}function N(e,t){var n=a();n.volume=e.target.value/100,d()?f({action:"volume",volume:n.volume}):t.volume=n.volume,m(n)}function M(t,n,o){var i=e("progress"),r=e("buffer"),s=e("time"),c=0,l=t-Math.floor(t);if(t>0&&(c=Math.floor(100/n*t),l<.4)){var d=a();d.duration=n,d.currentTime=t,m(d)}i&&s&&t>0&&(i.style.width=c+"%",r.style.width=o+"%",s.innerHTML=O(t)+" / "+O(n))}function H(t,n){var o=a(),i=e("progress"),r=e("time");if(t.clientX>128){var s=(t.clientX-128)/(window.innerWidth-133),c=o.duration;o.currentTime=c*s,d()?f({action:"seek",seconds:o.currentTime.toString()}):u()?AndroidBridge.seekPodcast(o.currentTime):n.currentTime=o.currentTime,r.innerHTML=O(o.currentTime)+" / "+O(o.duration),i.style.width=100*s+"%"}}function O(e){var t=Math.floor(e),n=Math.floor(t/60);return(n=n>=10?n:"0"+n)+":"+(t=(t=Math.floor(t%60))>=10?t:"0"+t)}function P(t){t.removeEventListener("timeupdate",h(t),!1),e("audiocontent").innerHTML="",s(),m(n()),d()?f({action:"terminate"}):u()&&AndroidBridge.terminatePodcast()}function R(t){if("attributes"===t.type){var n={};try{var o=e("audiocontent").dataset.podcast;n=JSON.parse(o)}catch(r){return void console.log(r)}var i=a();"tick"===n.action?(i.currentTime=n.currentTime,i.duration=n.duration,m(i),M(i.currentTime,i.duration,100)):console.log("Unrecognized podcast message: ",n)}}function D(){new MutationObserver(function(e){e.forEach(function(e){R(e)})}).observe(e("audiocontent"),{attributes:!0})}function z(){var t=a();document.getElementById("audiocontent").innerHTML=t.html;var n=e("audio");n!==undefined&&null!==n?(d()||(n.currentTime=t.currentTime||0),y(n),t.playing&&B(n)["catch"](function(){_()}),setTimeout(function(){n.addEventListener("timeupdate",h(n),!1),D()},500),g(n)):audioInitialized=!1}function F(e){var t=a();t.playing=e,m(t)}r(),b(),audioInitialized||(audioInitialized=!0,z());var j=e("audio"),q=e("audiocontent");j&&q&&q.innerHTML.length<25&&y(j)}function initializeReadingListIcons(){setReadingListButtonsState(),addReadingListCountToHomePage(),addHoverEffectToReadingListButtons()}function setReadingListButtonsState(){var e=document.querySelectorAll(".bookmark-button:not([data-initial-feed])");Array.from(e).forEach(highlightButton)}function highlightButton(e){var t=userData(),n=parseInt(e.dataset.reactableId,10);t&&t.reading_list_ids.indexOf(n)>-1?e.classList.add("selected"):e.classList.remove("selected"),e.addEventListener("click",reactToReadingListButtonClick)}function addReadingListCountToHomePage(){var e,t=userData();t&&document.getElementById("reading-list-count")&&(e=t.reading_list_ids.length>0?t.reading_list_ids.length:"",document.getElementById("reading-list-count").innerHTML=e,document.getElementById("reading-list-count").dataset.count=t.reading_list_ids.length)}function reactToReadingListButtonClick(e){var t;e.preventDefault(),sendHapticMessage("medium"),"logged-out"!==document.getElementsByTagName("body")[0].getAttribute("data-user-status")?(renderOptimisticResult(t=properButtonFromEvent(e)),getCsrfToken().then(sendFetch("reaction-creation",buttonFormData(t))).then(function(e){if(200===e.status)return e.json().then(function(e){renderButtonState(t,e),renderNewSidebarCount(t,e)})})["catch"](function(){})):showModal("add-to-readinglist-from-index")}function renderButtonState(e,t){"create"===t.result?(e.classList.add("selected"),addHoverEffectToReadingListButtons(e)):e.classList.remove("selected")}function renderNewSidebarCount(e,t){var n,a=document.getElementById("reading-list-count").dataset.count;a=parseInt(a,10),"create"===t.result?n=a+1:0!==a&&(n=a-1),document.getElementById("reading-list-count").dataset.count=n,document.getElementById("reading-list-count").innerHTML=n}function buttonFormData(e){var t=new FormData;return t.append("reactable_type","Article"),t.append("reactable_id",e.dataset.reactableId),t.append("category","readinglist"),t}function renderOptimisticResult(e){renderButtonState(e,{result:"create"})}function properButtonFromEvent(e){return"BUTTON"===e.target.tagName?e.target:e.target.parentElement}function addHoverEffectToReadingListButtons(){var e=document.getElementsByClassName("articles-list");Array.from(e).forEach(function(e){e.addEventListener("mouseover",readingListButtonMouseHandler.bind("Unsave")),e.addEventListener("mouseout",readingListButtonMouseHandler.bind("Saved"))})}function isReadingListButtonHoverTarget(e){var t=e.classList;return"BUTTON"===e.tagName&&t.contains("bookmark-button")&&t.contains("selected")||"SPAN"===e.tagName&&t.contains("bm-success")}function readingListButtonMouseHandler(e){var t=e.target;if(isReadingListButtonHoverTarget(t)){e.preventDefault();var n=this;("BUTTON"===t.tagName?t.getElementsByClassName("bm-success")[0]:t).innerHTML=n}}function initializeSettings(){const e=document.getElementById("settings-org-secret");e&&e.addEventListener("click",e=>{e.target.select()});let t=document.getElementById("rss-fetch-time");if(t){var n=t.getAttribute("datetime"),a={month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};t.textContent=timestampToLocalDateTime(n,navigator.language,a)}}function sponsorClickHandler(e){e.target.classList.contains("follow-action-button")&&(handleOptimisticButtRender(e.target),handleFollowButtPress(e.target)),ga("send","event","click","click sponsor link",e.target.dataset.details,null)}function listenForSponsorClick(){setTimeout(()=>{if(window.ga)for(var e=document.getElementsByClassName("partner-link"),t=0;t<e.length;t++)e[t].onclick=sponsorClickHandler},400)}function initializeSponsorshipVisibility(){var e=document.getElementById("sponsorship-widget")||document.getElementById("partner-content-display"),t=userData();e&&setTimeout(()=>{window.ga&&0===document.querySelectorAll("[data-partner-seen]").length&&(ga("send","event","view","sponsor displayed on page",e.dataset.details,null),e.dataset.partnerSeen="true")},400),e&&t&&t.display_sponsors?(e.classList.remove("hidden"),listenForSponsorClick()):e&&t?e.classList.add("hidden"):e&&(e.classList.remove("hidden"),listenForSponsorClick())}function initializeStylesheetAppend(){if(!document.getElementById("main-head-stylesheet")){var e=document.createElement("link");e.type="text/css",e.id="main-head-stylesheet",e.rel="stylesheet",e.href="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/minimal-d6aae4ac1e3f77aef9b115534c04b508ba9f894f376d1630e7b2dd31d0255559.css",document.getElementsByTagName("head")[0].appendChild(e)}}function initializeSwipeGestures(){initializeSwipeGestures.called=!0,swipeState="middle",setTimeout(function(){!function(e){var t=function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!0,!0,e.target),e.target.dispatchEvent(n),n=null,!1},n=!0,a={x:0,y:0},o={x:0,y:0},i={touchstart:function(e){a={x:e.touches[0].pageX,y:e.touches[0].pageY,scrollY:window.scrollY}},touchmove:function(e){n=!1,o={x:e.touches[0].pageX,y:e.touches[0].pageY,scrollY:window.scrollY}},touchend:function(e){if(n)t(e,"fc");else{var i=o.x-a.x,r=Math.abs(i),s=o.y-a.y,c=Math.abs(s),l=Math.abs(a.scrollY-o.scrollY);if(Math.max(r,c)>15)t(e,r/2>c&&l<5?i<0?"swl":"swr":s<0?"swu":"swd")}n=!0},touchcancel:function(){n=!1}};for(var r in i)e.addEventListener(r,i[r],!1)}(document);document.body.addEventListener("swl",handleSwipeLeft,!1),document.body.addEventListener("swr",handleSwipeRight,!1)},50)}function handleSwipeLeft(){document.getElementById("on-page-nav-controls")&&("middle"==swipeState?(swipeState="right",slideSidebar("right","intoView")):(swipeState="middle",slideSidebar("left","outOfView")))}function handleSwipeRight(){document.getElementById("on-page-nav-controls")&&("middle"==swipeState?(swipeState="left",slideSidebar("left","intoView")):(swipeState="middle",slideSidebar("right","outOfView")))}function formatDateTime(e,t){return new Intl.DateTimeFormat("en-US",e).format(t)}function convertUtcTime(e){return formatDateTime({hour:"numeric",minute:"numeric",timeZoneName:"short"},new Date(e))}function convertUtcDate(e){return formatDateTime({month:"short",day:"numeric"},new Date(e))}function convertCalEvent(e){return formatDateTime({weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},new Date(e))}function updateLocalDateTime(e,t,n){for(var a,o=0;o<e.length;o+=1)a=t(n(e[o])),e[o].innerHTML=a}function initializeTimeFixer(){var e=document.getElementsByClassName("utc-time"),t=document.getElementsByClassName("utc-date"),n=document.getElementsByClassName("utc");n&&(updateLocalDateTime(e,convertUtcTime,e=>e.dataset.datetime),updateLocalDateTime(t,convertUtcDate,e=>e.dataset.datetime),updateLocalDateTime(n,convertCalEvent,e=>e.innerHTML))}function getById(e){return document.getElementById(e)}function getClassList(e){return getById(e).classList}function blur(e,t){setTimeout(()=>{document.activeElement!==getById(t)&&getClassList("top-bar__menu").remove("showing")},10)}function removeShowingMenu(){getClassList("top-bar__menu").remove("showing"),setTimeout(()=>{getClassList("top-bar__menu").remove("showing")},5),setTimeout(()=>{getClassList("top-bar__menu").remove("showing")},150)}function toggleMenu(){getClassList("top-bar__menu").toggle("showing")}function initializeTouchDevice(){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|DEV-Native-ios/i.test(navigator.userAgent);"DEV-Native-ios"===navigator.userAgent&&document.getElementsByTagName("body")[0].classList.add("dev-ios-native-body"),setTimeout(()=>{removeShowingMenu(),e?getById("navigation-butt").addEventListener("click",toggleMenu):(getClassList("top-bar__menu").add("desktop"),getById("navigation-butt").addEventListener("focus",()=>getClassList("top-bar__menu").add("showing")),getById("last-nav-link").addEventListener("blur",e=>blur(e,"second-last-nav-link")),getById("navigation-butt").addEventListener("blur",e=>blur(e,"first-nav-link")))},10)}function initializeUserProfilePage(){const e=document.getElementsByClassName("profile-dropdown")[0];if(e){const t=userData();if(t&&t.username===e.dataset.username)e.hidden=!0;else{e.hidden=!1;const t=document.getElementById("user-profile-dropdown");if(t){const e=document.getElementById("user-profile-dropdownmenu");t.addEventListener("click",()=>{e.classList.toggle("showing")})}}}}function browserStoreCache(e,t){try{switch(e){case"set":localStorage.setItem("current_user",t),localStorage.setItem("config_body_class",JSON.parse(t).config_body_class);break;case"remove":localStorage.removeItem("current_user");break;default:return localStorage.getItem("current_user")}}catch(n){navigator.cookieEnabled&&browserStoreCache("remove")}return undefined}function buildArticleHTML(e){if(e&&"PodcastEpisode"==e.class_name)return'<div class="single-article single-article-small-pic single-article-single-podcast">      <div class="small-pic">       <a href="/'+e.podcast.slug+'" class="small-pic-link-wrapper">         <img src="'+e.podcast.image_url+'" alt="'+e.podcast.title+' image">       </a>       </div>       <a href="'+e.path+'" class="small-pic-link-wrapper index-article-link" id="article-link-'+e.id+'">        <div class="content">         <h3><span class="tag-identifier">podcast</span>'+e.title+'</h3>        </div>       </a>       <h4><a href="/'+e.podcast.slug+'">'+e.podcast.title+"</a></h4>       </div>";if(e){var t=document.getElementById("index-container"),n="",a=e.tag_list||e.cached_tag_list_array;a&&a.forEach(function(e){
n=n+'<a href="/t/'+e+'" class="crayons-tag"><span class="crayons-tag__prefix">#</span>'+e+"</a>\n"});var o="",i="0";if((e.comments_count||"0")>0)i=e.comments_count||"0";if("User"!=e.class_name)o='<a href="'+e.path+'#comments" class="crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon-left "><svg class="crayons-icon" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"/></svg>'+i+'<span class="hidden s:inline">&nbsp;comments</span></a>';var r="";if(t)var s=JSON.parse(t.dataset.params).tag;e.flare_tag&&s!=e.flare_tag.name&&(r="<span class='crayons-story__flare-tag' style='background:"+e.flare_tag.bg_color_hex+";color:"+e.flare_tag.text_color_hex+"'>#"+e.flare_tag.name+"</span>"),"PodcastEpisode"==e.class_name&&(r="<span class='crayons-story__flare-tag'>podcast</span>"),"Comment"==e.class_name&&(r="<span class='crayons-story__flare-tag'>comment</span>"),"User"==e.class_name&&(r="<span class='crayons-story__flare-tag' style='background:#5874d9;color:white;'>person</span>");var c,l,d=e.positive_reactions_count||"0",u="";"User"!=e.class_name&&(u='<a href="'+e.path+'" class="crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon-left"><svg class="crayons-icon" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"/></svg>'+d+'<span class="hidden s:inline">&nbsp;reactions</span></a>'),"PodcastEpisode"==e.class_name?(c=e.main_image,l=e.slug,e.title):(c=e.user.profile_image_90,l=e.user.username,e.user.name);var m="",f="",g="crayons-avatar--l";if(e.organization&&!document.getElementById("organization-article-index"))f='<a href="/'+e.organization.slug+'" class="crayons-logo crayons-logo--l"><img alt="'+e.organization.name+' logo" src="'+e.organization.profile_image_90+'" class="crayons-logo__image" loading="lazy"/></a>',m='<span><span class="crayons-story__tertiary fw-normal"> for </span><a href="/'+e.organization.slug+'" class="crayons-story__secondary fw-medium">'+e.organization.name+"</a></span>",g="crayons-avatar--s absolute -right-2 -bottom-2 border-solid border-2 border-base-inverted";var p="";e.published_at_int&&(p=timeAgo({oldTimeInSeconds:e.published_at_int}));var h="";e.readable_publish_date&&(h=e.published_timestamp?'<time datetime="'+e.published_timestamp+'">'+e.readable_publish_date+" "+p+"</time>":"<time>"+e.readable_publish_date+" "+p+"</time>");var y='<div class="crayons-story__meta">      <div class="crayons-story__author-pic">        '+f+'        <a href="/'+l+'" class="crayons-avatar '+g+'">          <img src="'+c+'" alt="'+l+' profile" class="crayons-avatar__image" loading="lazy" />        </a>      </div>      <div>        <p>          <a href="/'+l+'" class="crayons-story__secondary fw-medium">'+filterXSS(e.user.name)+"</a>          "+m+'        </p>        <a href="'+e.path+'" class="crayons-story__tertiary fs-xs">          '+h+"        </a>      </div>    </div>",v="",b="";if(e.highlight&&e.highlight.body_text.length>0){var w=e.highlight.body_text[0],E="";w.toLowerCase()!=w.toUpperCase()&&(E="\u2026"),(v=E+e.highlight.body_text.join("...")+"\u2026").length>0&&(b='<div class="crayons-story__snippet mb-1">'+v+"</div>")}var k="";"Article"===e.class_name&&(k='<small class="crayons-story__tertiary fs-xs mr-2">'+((e.reading_time||null)<1?"1 min":e.reading_time+" min")+" read</small>");var _="";"Article"===e.class_name?_='<button type="button" class="crayons-btn crayons-btn--secondary crayons-btn--s bookmark-button" data-reactable-id="'+e.id+'">                      <span class="bm-initial">Save</span>                      <span class="bm-success">Saved</span>                    </button>':"User"===e.class_name&&(_='<button type="button" class="crayons-btn crayons-btn--secondary crayons-btn--icon-left fs-s bookmark-button article-engagement-count engage-button follow-action-button follow-user"                       data-info=\'{"id":'+e.id+',"className":"User"}\' data-follow-action-button>                       &nbsp;                    </button>');var T="";return e.cloudinary_video_url&&(T='<a href="'+e.path+'" class="crayons-story__video" style="background-image:url('+e.cloudinary_video_url+')"><div class="crayons-story__video__time">'+(e.video_duration_string||e.video_duration_in_minutes)+"</div></a>"),'<article class="crayons-story" data-article-path="'+e.path+'" data-content-user-id="'+e.user_id+'">      <div role="presentation">        '+T+'        <div class="crayons-story__body">          <div class="crayons-story__top">            '+y+'          </div>          <div class="crayons-story__indention">            <h2 class="crayons-story__title"><a href="'+e.path+'" id="article-link-'+e.id+'">'+r+filterXSS(e.title)+'</a></h2>            <div class="crayons-story__tags">'+n+"</div>            "+b+'            <div class="crayons-story__bottom">              <div class="crayons-story__details">'+u+o+'</div>                <div class="crayons-story__save">                '+k+"                "+_+"              </div>            </div>          </div>        </div>      </div>    </article>"}}function buildCommentFormHTML(e,t,n){var a=document.querySelector("meta[name='csrf-token']").getAttribute("content"),o=userData(),i="";o&&!o.codeOfConduct&&o.commentCount<1&&(i='<div class="code-of-conduct sub-comment-code-of-conduct" style="display:block" id="toggle-code-of-conduct-checkbox">                            <input class="checkbox" type="checkbox" name="checked_code_of_conduct" required />                            <label for="checked_code_of_conduct">I\'ve read the <a href="https://dev.to/code-of-conduct">code of conduct</a></label>                          </div>');var r=Math.floor(1991*Math.random());return'<form class="new_comment" onsubmit="handleCommentSubmit.bind(this)(event)" id="new-comment-'+n+'" action="/comments" accept-charset="UTF-8" method="post" data-comment-id="'+n+'">            <input name="utf8" type="hidden" value="&#x2713;" />            <input type="hidden" name="authenticity_token" value="'+a+'">            <input value="'+e+'" type="hidden" name="comment[commentable_id]" id="comment_commentable_id" />            <input value="'+t+'" type="hidden" name="comment[commentable_type]" id="comment_commentable_type" />            <input value="'+n+'" type="hidden" name="comment[parent_id]" id="comment_parent_id" />            <div class="response-templates-container hidden">              <header>                <button type="button" class="personal-template-button active" data-target-type="personal">PERSONAL</button>                <button type="button" class="moderator-template-button hidden" data-target-type="moderator">MODERATOR</button>              </header>              <img class="loading-img hidden" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/loading-ellipsis-0c700f143e37c35526e0229e9113243a6e1c30508cfad2029a6ded45e168fbc3.svg" alt="loading">              <div class="personal-responses-container">              </div>              <div class="moderator-responses-container hidden">              </div>              <a target="_blank" rel="noopener nofollow" href="/settings/response-templates">Create new template</a>              <p>Create templates to quickly answer FAQs or store snippets for re-use.</p>            </div>            <textarea id="textarea-for-'+n+'" class="embiggened" name="comment[body_markdown]" id="comment_body_markdown" required onkeydown="handleKeyDown.bind(this)(event)"></textarea>            '+'<div class="preview-toggle comment-preview-div body"></div>'+"                "+i+'            <a href="/p/editor_guide" class="markdown-guide" target="_blank" rel="noopener" title="Markdown Guide">              <img alt="markdown guide" class="icon-image" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/info-b2ce6a88ddd367e1416cd4c05aab2edee2d0b2c355d7b2aae1821eec48014e11.svg" />            </a>            <div class="editor-response-templates in-reply">              <button class="response-templates-button" title="Use a response template" type="button" data-has-listener="false">                <img src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/response-template-0d699b8c2cde5f5c76d16e462c7c85e99944fda1fdd4d830a1217fa89b03be46.svg" alt="" class="icon-image">              </button>            </div>            <div class="editor-image-upload">              <input type="file" id="image-upload-'+r+'"  name="file" accept="image/*" style="display:none">              <button title="Upload Image" class="image-upload-button" id="image-upload-button-'+r+'" onclick="handleImageUpload(event,'+r+')">                <img alt="upload image" class="icon-image" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/image-upload-f5242154f76102fa8869623b3d54adbeecbf24989ba8546e4f8ce229acec2c82.svg" />              </button>              <label  class="image-upload-file-label" id="image-upload-file-label-'+r+'"></label>              <input type="submit" id="image-upload-submit-'+r+'" value="Upload" style="display:none">              <input class="uploaded-image" id="uploaded-image-'+r+'" />            </div>            <div class="actions reply-actions">              <a href="#" class="cancel" onclick="cancel(event,this)">CANCEL</a>              '+'<button id="preview-button" class="comment-action-button comment-action-preview" onclick="handleCommentPreview(event)">PREVIEW</button>'+'              <input type="submit" class="comment-action-button" name="commit" value="SUBMIT" />            </div>          </form>'}function cancel(e,t){e.preventDefault(),replaceActionButts(t.parentNode.parentNode.parentNode.parentNode),initializeCommentsPage()}function buildCommentHTML(e){var t="",n="",a="",o="",i="",r="";return t=e.newly_created?0==e.depth?"root":e.depth<3?"child":"child flat-node":"child flat-node",e.user.twitter_username&&e.user.twitter_username.length>0&&(a='<a href="http://twitter.com/'+e.user.twitter_username+'" rel="noopener noreferrer" target="_blank"><img class="icon-img" alt="twitter logo" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/twitter-logo-fe34f4c4c24dabe47c2b59aeb1397d6ae56b0501a1320f20ac523dd84230d789.svg" /></a>'),e.user.github_username&&e.user.github_username.length>0&&(n='<a href="http://github.com/'+e.user.github_username+'" rel="noopener noreferrer" target="_blank"><img class="icon-img" alt="github logo" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/github-logo-28d89282e0daa1e2496205e2f218a44c755b0dd6536bbadf5ed5a44a7ca54716.svg" /></a>'),e.newly_created&&(o="comment-created-via-fetch"),e.depth<3&&(i="<details open><summary><span>&nbsp;</span></summary>",r="</details>"),"<style>"+e.css+"</style>          "+i+'          <div class="comment-hash-marker" id="'+e.id_code+'"></div>          <div id="comment-node-'+e.id+'" class="single-comment-node '+t+" comment-deep-"+e.depth+'" "          data-comment-id="'+e.id+'" data-comment-author-id="'+e.user.id+'" data-current-user-comment="'+e.newly_created+'" data-content-user-id="'+e.user.id+'">          <div class="inner-comment '+o+'">            <div class="details">              <a href="/'+e.user.username+'">                <img class="profile-pic" src="'+e.user.profile_pic+'" alt="'+e.user.username+'">                <span class="comment-username"><span class="comment-username-inner">'+e.user.name+"</span></span>              </a>                "+a+"                "+n+'              <div class="comment-date">                <a href="'+e.url+'">                  <time datetime="'+e.published_timestamp+'">                    '+e.readable_publish_date+'                  </time>                </a>              </div>              <button class="dropbtn">                <img class="dropdown-icon" alt="Toggle dropdown menu" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/three-dots-7b05a5bfd5aeec41f8cc6c98956fd817d7d1646ebad827d20d5fe6962b193bf0.svg" />              </button>              <div class="dropdown">                  <div class="dropdown-content">                    <a href="'+e.url+'">                      Permalink                    </a>                    <a href="'+e.url+'/settings">                      Settings                    </a>                    <a href="/report-abuse?url=https://dev.to'+e.url+'">Report Abuse</a>                  </div>              </div>            </div>            <div class="body">              '+e.body_html+"              "+reactions(e)+"            </div>            "+actions(e)+"          </div>      </div>      "+r}function actions(e){return e.newly_created?'<div class="actions" data-comment-id="'+e.id+'" data-path="'+e.url+'">              <span class="current-user-actions" style="display: '+(e.newly_created?"inline-block":"none")+';">                <a data-no-instant="" href="'+e.url+'/delete_confirm" class="edit-butt" rel="nofollow">DELETE</a>                <a href="'+e.url+'/edit" class="edit-butt" rel="nofollow">EDIT</a>              </span>                <a href="#" class="toggle-reply-form" rel="nofollow">REPLY</a>            </div>':'<div class="actions" data-comment-id="'+e.id+'" data-path="'+e.url+'" data-commentable-id="'+e.commentable.id+'">                <a href="'+e.url+'" rel="nofollow">VIEW/REPLY</a>            </div>'}function reactions(e){if(e.newly_created)return'<button class="reaction-button reacted" id="button-for-comment-'+e.id+'" data-comment-id="'+e.id+'">              <img src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/favorite-heart-outline-button-b48231d5f481b4d8b8e4197caca3144aedfe1755be7bd26b4f33563f44e73d16.svg" alt="Favorite heart outline button">              <img class="voted-heart" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/emoji/emoji-one-heart-855b5a6263042e4c9448cf2cb0dd2e201598b77b1e3f1dc041492bc0128d9fb8.png" alt="Favorite heart button">              <span class="reactions-count" id="reactions-count-'+e.id+'">1</span></button>';if(e.heart_ids.indexOf(userData().id)>-1)var t="reacted";else t="";return'<button style="background:white" class="reaction-button '+t+'" id="button-for-comment-'+e.id+'" data-comment-id="'+e.id+'">              <img src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/favorite-heart-outline-button-b48231d5f481b4d8b8e4197caca3144aedfe1755be7bd26b4f33563f44e73d16.svg" alt="Favorite heart outline button">              <img class="voted-heart" src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/emoji/emoji-one-heart-855b5a6263042e4c9448cf2cb0dd2e201598b77b1e3f1dc041492bc0128d9fb8.png" alt="Favorite heart button">              <span class="reactions-count" id="reactions-count-'+e.id+'">'+e.positive_reactions_count+"</span></button>"}function checkUserLoggedIn(){const e=document.getElementsByTagName("body")[0];return!!e&&"logged-in"===e.getAttribute("data-user-status")}function dynamicallyLoadScript(e){if(document.querySelector(`script[src='${e}']`))return;const t=document.createElement("script");t.src=e,document.head.appendChild(t)}function getCsrfToken(){return new Promise(function(e,t){var n=0,a=setInterval(function(){var o=document.querySelector("meta[name='csrf-token']");if(n++,o){clearInterval(a);var i=o.getAttribute("content");return e(i)}if(1e3===n)return clearInterval(a),Honeybadger.notify("Could not locate CSRF metatag "+JSON.stringify(localStorage.current_user)),t("Could not locate CSRF meta tag on the page.")},5)})}function getCurrentPage(e){return document.querySelectorAll("[data-current-page='"+e+"']").length>0}function getImageForLink(e){var t=e.getAttribute("data-preload-image");t&&-1===$fetchedImageUrls.indexOf(t)&&((new Image).src=t,$fetchedImageUrls.push(t))}function insertAfter(e,t){t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function timestampToLocalDateTime(e,t,n){if(""===e)return"";try{var a=new Date(e);return new Intl.DateTimeFormat(t||"default",n).format(a)}catch(o){return""}}function addLocalizedDateTimeToElementsTitles(e,t){for(var n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},a=0;a<e.length;a+=1){var o=e[a],i=o.getAttribute(t||"datetime");if(i){var r=timestampToLocalDateTime(i,navigator.language,n);o.setAttribute("title",r)}}}function localizeTimeElements(e,t){for(let n=0;n<e.length;n+=1){const a=e[n],o=a.getAttribute("datetime");if(o){const e=timestampToLocalDateTime(o,navigator.language,t);a.textContent=e}}}function localStorageTest(){var e="devtolocalstoragetestforavaialbility";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function preventDefaultAction(e){e.preventDefault()}function sendFetch(e,t){switch(e){case"article-preview":return fetchCallback({url:"/articles/preview",headers:{Accept:"application/json","Content-Type":"application/json"},body:t});case"reaction-creation":return fetchCallback({url:"/reactions",addTokenToBody:!0,body:t});case"image-upload":return fetchCallback({url:"/image_uploads",addTokenToBody:!0,body:t});case"follow-creation":return fetchCallback({url:"/follows",addTokenToBody:!0,body:t});case"chat-creation":return fetchCallback({url:"/chat_channels/create_chat",addTokenToBody:!0,body:t});case"block-user":return fetchCallback({url:"/user_blocks",headers:{Accept:"application/json","Content-Type":"application/json"},addTokenToBody:!1,body:t});case"comment-creation":return fetchCallback({url:"/comments",headers:{"Content-Type":"application/json"},body:t});case"comment-preview":return fetchCallback({url:"/comments/preview",headers:{"Content-Type":"application/json"},body:t});default:console.log("A wrong switchStatement was used.")}return!0}function sendHapticMessage(e){try{window&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.haptic&&window.webkit.messageHandlers.haptic.postMessage(e)}catch(t){console.log(t.message)}}function initSignupModal(){document.getElementById("global-signup-modal")&&(document.getElementById("global-signup-modal-bg").onclick=(()=>{document.getElementById("global-signup-modal").style.display="none",document.getElementById("global-signup-modal").classList.remove("showing"),document.getElementsByTagName("body")[0].classList.remove("modal-open")}))}function showModal(){document.getElementById("global-signup-modal").style.display="block",document.getElementById("global-signup-modal").classList.add("showing"),document.getElementsByTagName("body")[0].classList.add("modal-open"),initSignupModal()}function slideSidebar(e,t){document.getElementById("sidebar-wrapper-"+e)&&("intoView"===t?(document.getElementById("articles-list").classList.add("modal-open"),document.getElementsByTagName("body")[0].classList.add("modal-open"),document.getElementById("sidebar-wrapper-"+e).classList.add("swiped-in"),document.getElementById("articles-list").addEventListener("touchmove",preventDefaultAction,!1)):(document.getElementById("articles-list").classList.remove("modal-open"),document.getElementsByTagName("body")[0].classList.remove("modal-open"),document.getElementById("sidebar-wrapper-"+e).querySelector(".side-bar").scrollTop=0,document.getElementById("sidebar-wrapper-"+e).classList.remove("swiped-in"),document.getElementById("articles-list").removeEventListener("touchmove",preventDefaultAction,!1)))}function secondsToHumanUnitAgo(e){const t=[["second",1],["min",60],["hour",3600],["day",86400],["week",604800],["month",2592e3],["year",31536e3]];if(e<t[0][1])return"just now";let n=0;for(;n+1<t.length&&e>=t[n+1][1];)n+=1;const a=Math.floor(e/t[n][1]);return a+" "+(t[n][0]+(1===a?"":"s"))+" ago"}function timeAgo({oldTimeInSeconds:e,formatter:t=(e=>`<span class="time-ago-indicator">(${e})</span>`),maxDisplayedAge:n=86399}){const a=new Date/1e3,o=Math.round(a-e);return o>n?"":t(secondsToHumanUnitAgo(o))}function userData(){const{user:e=null}=document.body.dataset;return JSON.parse(e)}function initializePage(){initializeLocalStorageRender(),initializeStylesheetAppend(),callInitalizers()}function callInitalizers(){initializeLocalStorageRender(),initializeBodyData();var e=setInterval(function(){"true"==document.getElementsByTagName("body")[0].getAttribute("data-loaded")&&(clearInterval(e),"logged-in"==document.getElementsByTagName("body")[0].getAttribute("data-user-status")&&(initializeBaseUserData(),initializeAllChatButtons(),initializeAllTagEditButtons()),initializeAllFollowButts(),initializeUserFollowButts(),initializeReadingListIcons(),initializeSponsorshipVisibility(),document.getElementById("sidebar-additional")&&document.getElementById("sidebar-additional").classList.add("showing"))},1);initializeBaseTracking(),initializeTouchDevice(),initializeCommentsPage(),initializeArticleDate(),initializeArticleReactions(),initNotifications(),initializeStylesheetAppend(),initializeCommentDate(),initializeCommentDropdown(),initializeSettings(),initializeFooterMod(),initializeCommentPreview(),initializeAdditionalContentBoxes(),initializeTimeFixer(),initializeDashboardSort(),initializePWAFunctionality(),initializeEllipsisMenu(),initializeArchivedPostFilter(),initializeCreditsPage(),initializeUserProfilePage(),initializePodcastPlayback(),initializeDrawerSliders(),initializeHeroBannerClose(),initializeOnboardingTaskCard(),nextPage=0,fetching=!1,done=!1,adClicked=!1,setTimeout(function(){done=!1},300),initScrolling.called||initScrolling()}function initializeBaseApp(){InstantClick.on("change",function(){initializePage()}),InstantClick.init()}var client,negativeFollow=-1,KEY_CODE_B=66,KEY_CODE_I=73,KEY_CODE_K=75,ENTER_KEY_CODE=13,audioInitialized=!1,$fetchedImageUrls=[];const fetchCallback=({url:e,headers:t={},addTokenToBody:n=!1,body:a})=>o=>(n&&a.append("authenticity_token",o),window.fetch(e,{method:"POST",headers:{"X-CSRF-Token":o,...t},body:a,credentials:"same-origin"}));"undefined"!=typeof globalThis&&(globalThis.timeAgo=timeAgo),function e(t,n,a){function o(r,s){if(!n[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){var n=t[r][1][e];return o(n||e)},d,d.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(e,t,n){function a(){return{}}function o(){}function i(){}function r(){}function s(){}function c(e){return e.replace(B,"&lt;").replace(I,"&gt;")}function l(e,t,n,a){if(n=p(n),"href"===t||"src"===t){if("#"===(n=_.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(N.lastIndex=0,N.test(n))return""}else if("style"===t){if(M.lastIndex=0,M.test(n))return"";if(H.lastIndex=0,H.test(n)&&(N.lastIndex=0,N.test(n)))return"";!1!==a&&(n=(a=a||T).process(n))}return n=h(n)}function d(e){return e.replace(L,"&quot;")}function u(e){return e.replace(S,'"')}function m(e){return e.replace(C,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function f(e){return e.replace(A,":").replace(x," ")}function g(e){for(var t="",n=0,a=e.length;n<a;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return _.trim(t)}function p(e){return e=g(e=f(e=m(e=u(e))))}function h(e){return e=c(e=d(e))}function y(){return""}function v(e,t){function n(t){return!!a||-1!==_.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var a=!Array.isArray(e),o=[],i=!1;return{onIgnoreTag:function(e,a,r){if(n(e)){if(r.isClosing){var s="[/removed]",c=r.position+s.length;return o.push([!1!==i?i:r.position,c]),i=!1,s}return i||(i=r.position),"[removed]"}return t(e,a,r)},remove:function(e){var t="",n=0;return _.forEach(o,function(a){t+=e.slice(n,a[0]),n=a[1]}),t+=e.slice(n)}}}function b(e){return e.replace(O,"")}function w(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))})).join("")}var E=e("cssfilter").FilterCSS,k=e("cssfilter").getDefaultWhiteList,_=e("./util"),T=new E,B=/</g,I=/>/g,L=/"/g,S=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,A=/&colon;?/gim,x=/&newline;?/gim,N=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,M=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,H=/u\s*r\s*l\s*\(.*/gi,O=/<!--[\s\S]*?-->/g;n.whiteList=a(),n.getDefaultWhiteList=a,n.onTag=o,n.onIgnoreTag=i,n.onTagAttr=r,n.onIgnoreTagAttr=s,n.safeAttrValue=l,n.escapeHtml=c,n.escapeQuote=d,n.unescapeQuote=u,n.escapeHtmlEntities=m,n.escapeDangerHtml5Entities=f,n.clearNonPrintableCharacter=g,n.friendlyAttrValue=p,n.escapeAttrValue=h,n.onIgnoreTagStripAll=y,n.StripTagBody=v,n.stripCommentTag=b,n.stripBlankChar=w,n.cssFilter=T,n.getDefaultCSSWhiteList=k},{"./util":4,cssfilter:8}],2:[function(e,t,n){function a(e,t){return new r(t).process(e)}var o=e("./default"),i=e("./parser"),r=e("./xss");for(var s in(n=t.exports=a).FilterXSS=r,o)n[s]=o[s];for(var s in i)n[s]=i[s];"undefined"!=typeof window&&(window.filterXSS=t.exports)},{"./default":1,"./parser":3,"./xss":5}],3:[function(e,t,n){function a(e){var t=e.indexOf(" ");if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=u.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function o(e){return"</"===e.slice(0,2)}function i(e,t,n){"user strict";var i="",r=0,s=!1,c=!1,l=0,d=e.length,u="",m="";for(l=0;l<d;l++){var f=e.charAt(l);if(!1===s){if("<"===f){s=l;continue}}else if(!1===c){if("<"===f){i+=n(e.slice(r,l)),s=l,r=l;continue}if(">"===f){i+=n(e.slice(r,s)),m=a(u=e.slice(s,l+1)),i+=t(s,i.length,m,u,o(u)),r=l+1,s=!1;continue}if(('"'===f||"'"===f)&&"="===e.charAt(l-1)){c=f;continue}}else if(f===c){c=!1;continue}}return r<e.length&&(i+=n(e.substr(r))),i}function r(e,t){"user strict";function n(e,n){if(!((e=(e=u.trim(e)).replace(m,"").toLowerCase()).length<1)){var a=t(e,n||"");a&&o.push(a)}}for(var a=0,o=[],i=!1,r=e.length,l=0;l<r;l++){var f,g=e.charAt(l);if(!1!==i||"="!==g)if(!1===i||l!==a||'"'!==g&&"'"!==g||"="!==e.charAt(l-1))if(" "!==g);else{if(!1===i){if(-1===(f=s(e,l))){n(u.trim(e.slice(a,l))),i=!1,a=l+1;continue}l=f-1;continue}if(-1===(f=c(e,l-1))){n(i,d(u.trim(e.slice(a,l)))),i=!1,a=l+1;continue}}else{if(-1===(f=e.indexOf(g,l+1)))break;n(i,u.trim(e.slice(a+1,f))),i=!1,a=(l=f)+1}else i=e.slice(a,l),a=l+1}return a<e.length&&(!1===i?n(e.slice(a)):n(i,d(u.trim(e.slice(a))))),u.trim(o.join(" "))}function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function c(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}function d(e){return l(e)?e.substr(1,e.length-2):e}var u=e("./util"),m=/[^a-zA-Z0-9_:\.\-]/gim;n.parseTag=i,n.parseAttr=r},{"./util":4}],4:[function(e,t){t.exports={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,o;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,o=e.length;a<o;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")}}},{}],5:[function(e,t){function n(e){return e===undefined||null===e}function a(e){var t=e.indexOf(" ");if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=u.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=u.trim(e.slice(0,-1))),{html:e,closing:n}}function o(e){var t={};for(var n in e)t[n]=e[n];return t}function i(e){(e=o(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=s.onIgnoreTagStripAll),e.whiteList=e.whiteList||s.whiteList,e.onTag=e.onTag||s.onTag,e.onTagAttr=e.onTagAttr||s.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||s.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||s.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||s.safeAttrValue,e.escapeHtml=e.escapeHtml||s.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}var r=e("cssfilter").FilterCSS,s=e("./default"),c=e("./parser"),l=c.parseTag,d=c.parseAttr,u=e("./util");i.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this,o=t.options,i=o.whiteList,r=o.onTag,c=o.onIgnoreTag,m=o.onTagAttr,f=o.onIgnoreTagAttr,g=o.safeAttrValue,p=o.escapeHtml,h=t.cssFilter;o.stripBlankChar&&(e=s.stripBlankChar(e)),o.allowCommentTag||(e=s.stripCommentTag(e));var y=!1;if(o.stripIgnoreTagBody){y=s.StripTagBody(o.stripIgnoreTagBody,c);c=y.onIgnoreTag}var v=l(e,function(e,t,o,s,l){var y,v={sourcePosition:e,position:t,isClosing:l,isWhite:o in i};if(!n(y=r(o,s,v)))return y;if(v.isWhite){if(v.isClosing)return"</"+o+">";var b=a(s),w=i[o],E=d(b.html,function(e,t){var a,i=-1!==u.indexOf(w,e);return n(a=m(o,e,t,i))?i?(t=g(o,e,t,h))?e+'="'+t+'"':e:n(a=f(o,e,t,i))?void 0:a:a});s="<"+o;return E&&(s+=" "+E),b.closing&&(s+=" /"),s+=">"}return n(y=c(o,s,v))?p(s):y},p);return y&&(v=y.remove(v)),v},t.exports=i},{"./default":1,"./parser":3,"./util":4,cssfilter:8}],6:[function(e,t){function n(e){return e===undefined||null===e}function a(e){var t={};for(var n in e)t[n]=e[n];return t}function o(e){(e=a(e||{})).whiteList=e.whiteList||i.whiteList,e.onAttr=e.onAttr||i.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||i.onIgnoreAttr,this.options=e}var i=e("./default"),r=e("./parser");e("./util");o.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,a=t.whiteList,o=t.onAttr,i=t.onIgnoreAttr;return r(e,function(e,t,r,s,c){var l=a[r],d=!1;!0===l?d=l:"function"==typeof l?d=l(s):l instanceof RegExp&&(d=l.test(s)),!0!==d&&(d=!1);var u,m={position:t,sourcePosition:e,source:c,isWhite:d};return d?n(u=o(r,s,m))?r+":"+s:u:n(u=i(r,s,m))?void 0:u})},t.exports=o},{"./default":7,"./parser":9,"./util":10}],7:[function(e,t,n){function a(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,
"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}function o(){}function i(){}n.whiteList=a(),n.getDefaultWhiteList=a,n.onAttr=o,n.onIgnoreAttr=i},{}],8:[function(e,t,n){function a(e,t){return new i(t).process(e)}var o=e("./default"),i=e("./css");for(var r in(n=t.exports=a).FilterCSS=i,o)n[r]=o[r];"undefined"!=typeof window&&(window.filterCSS=t.exports)},{"./css":6,"./default":7}],9:[function(e,t){function n(e,t){function n(){if(!i){var n=a.trim(e.slice(r,s)),o=n.indexOf(":");if(-1!==o){var l=a.trim(n.slice(0,o)),d=a.trim(n.slice(o+1));if(l){var u=t(r,c.length,l,d,n);u&&(c+=u+"; ")}}}r=s+1}";"!==(e=a.trimRight(e))[e.length-1]&&(e+=";");for(var o=e.length,i=!1,r=0,s=0,c="";s<o;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var d=e.indexOf("*/",s+2);if(-1===d)break;r=(s=d+1)+1,i=!1}else"("===l?i=!0:")"===l?i=!1:";"===l?i||n():"\n"===l&&n()}return a.trim(c)}var a=e("./util");t.exports=n},{"./util":10}],10:[function(e,t){t.exports={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,o;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,o=e.length;a<o;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},{}]},{},[2]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Honeybadger=t()}(this,function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(t,n){function a(t){if(!t||"object"!==e(t))return!1;for(var n=0;n<r.length;n++){if(r[n]===t)return!0}return r.push(t),!1}function o(t){return!/function|symbol/.test(e(t))&&(null!==t&&("object"!==e(t)||"undefined"!=typeof t.hasOwnProperty))}function i(t,r){if(r||(r=0),r>=n)return"[DEPTH]";if(!o(t))return Object.prototype.toString.call(t);if(a(t))return"[RECURSION]";if(Array.isArray(t))return t.map(function(e){return i(e,r+1)});if("object"===e(t)){var s={};for(var c in t){var l=t[c];Object.prototype.hasOwnProperty.call(t,c)&&null!=c&&null!=l&&(s[c]=i(l,r+1))}return s}return t}var r=[];return i(t)}function n(e){if(!e||!e.tagName)return"";var t=e.tagName.toLowerCase();if("html"===t)return"";e.id&&(t+="#".concat(e.id));var n=e.getAttribute("class");n&&n.split(/\s+/).forEach(function(e){t+=".".concat(e)}),["alt","name","title","type"].forEach(function(n){var a=e.getAttribute(n);a&&(t+="[".concat(n,'="').concat(a,'"]'))});var a=l(e);return a.length>1&&(t+=":nth-child(".concat(Array.prototype.indexOf.call(a,e)+1,")")),t}function a(e){var t=n(e);if(e.parentNode&&e.parentNode.tagName){var o=a(e.parentNode);if(o.length>0)return"".concat(o," > ").concat(t)}return t}function o(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),d(t.trim(),300)}function i(){if(!window.fetch)return!1;if(r(window.fetch))return!0;try{var e=document.createElement("iframe");e.style.display="none",document.head.appendChild(e);var t=e.contentWindow.fetch&&r(e.contentWindow.fetch);return document.head.removeChild(e),t}catch(n){console&&console.warn&&console.warn("failed to detect native fetch via iframe: "+n)}return!1}function r(e){return-1!==e.toString().indexOf("native")}function s(e){var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/)||{};return{protocol:t[2],host:t[4],pathname:t[5]}}function c(e){var t=s(e),n=s(document.URL);return t.host&&t.protocol?t.protocol===n.protocol&&t.host===n.host?t.pathname:"".concat(t.protocol,"://").concat(t.host).concat(t.pathname):t.pathname}function l(e){try{var t=e.parentNode.childNodes,n=[];return Array.prototype.forEach.call(t,function(t){t.tagName&&t.tagName===e.tagName&&n.push(t)}),n}catch(a){return[]}}function d(e,t){return e.length>t&&(e=e.substr(0,t)+"..."),e}function u(){function r(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}function s(t){if("object"!==e(t))return{};var n={};for(var a in t)n[a]=t[a];return n}function l(e,t){var n=r(e,t);return e.context&&t.context&&(n.context=r(e.context,t.context)),n}function d(e){return!!b&&(b.name===e.name&&(b.message===e.message&&b.stack===e.stack))}function u(e,t){var n=e.message;for(var a in t)if(t[a].test(n))return!0;return!1}function m(){var e={};return e.HTTP_USER_AGENT=navigator.userAgent,document.referrer.match(/\S/)&&(e.HTTP_REFERER=document.referrer),e}function f(t){if("object"!==e(t))return undefined;var n=[];for(var a in t)n.push(a+"="+t[a]);return n.join(";")}function g(e){return e.stacktrace||e.stack||undefined}function p(e){var t,n=10;if(e&&(t=g(e)))return{stack:t,generator:undefined};try{throw new Error("")}catch(o){if(t=g(o))return{stack:t,generator:"throw"}}t=["<call-stack>"];for(var a=arguments.callee;a&&t.length<n;){/function(?:\s+([\w$]+))+\s*\(/.test(a.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{a=a.caller}catch(o){break}}return{stack:t.join("\n"),generator:"walk"}}function h(e,t,n){var a,o;for(a=0,o=e.length;a<o;a++)if(!1===(0,e[a])(t,n))return!0;return!1}function y(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function v(e){return"function"!=typeof Object.isExtensible||Object.isExtensible(e)}var b,w="2.2.1",E={name:"honeybadger-js",url:"https://github.com/honeybadger-io/honeybadger-js",version:w,language:"javascript"},k=!1,_=!1;return function(T){function B(){var e=window.console;if(e){var t=Array.prototype.slice.call(arguments);t.unshift("[Honeybadger]"),e.log.apply(e,t)}}function I(){if(L("debug"))return B.apply(this,arguments)}function L(e,t){var n=U[e];return n===undefined&&(n=U[e.toLowerCase()]),"false"===n&&(n=!1),n!==undefined?n:t}function S(){return!F&&L("onerror",!0)}function C(){return!F&&L("onunhandledrejection",!0)}function A(){return L("breadcrumbsEnabled",!0)}function x(){return"http"+(L("ssl",!0)?"s":"")+"://"+L("host","api.honeybadger.io")}function N(e,n){try{var a=H(n),o=new XMLHttpRequest;o.open("POST",x()+"/v1/notices/js",L("async",!0)),o.setRequestHeader("X-API-Key",e),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","text/json, application/json"),o.send(JSON.stringify(t(a,L("max_depth",8)))),o.onload=function(){var e=Array.prototype.slice.call(U.afterNotifyHandlers);if(n.afterNotify&&e.unshift(n.afterNotify),201!==o.status)return h(e,new Error("Bad HTTP response: ".concat(o.status)),n),void I("Unable to send error report: ".concat(o.status,": ").concat(o.statusText),o,n);h(e,undefined,r(n,{id:JSON.parse(o.response).id})),I("Error report sent",a)}}catch(i){h(U.afterNotifyHandlers,i,n),B("Unable to send error report: error while initializing request",i,n)}}function M(e){if(b=null,L("disabled",!1))return I("Dropping notice: honeybadger.js is disabled",e),!1;var t=L("apiKey",L("api_key"));return t?z()?(I("Dropping notice: max errors exceeded",e),!1):(D(),N(t,e),!0):(B("Unable to send error report: no API key has been configured"),!1)}function H(t){var n=m();return"string"==typeof t.cookies?n.HTTP_COOKIE=t.cookies:"object"===e(t.cookies)&&(n.HTTP_COOKIE=f(t.cookies)),{notifier:E,breadcrumbs:{enabled:A(),trail:t.breadcrumbs},error:{"class":t.name,message:t.message,backtrace:t.stack,generator:t.generator,fingerprint:t.fingerprint},request:{url:t.url,component:t.component,action:t.action,context:t.context,cgi_data:n,params:t.params},server:{project_root:t.projectRoot,environment_name:t.environment,revision:t.revision}}}function O(t,n){if(t||(t={}),"[object Error]"===Object.prototype.toString.call(t)){var a=t;t=r(t,{name:a.name,message:a.message,stack:g(a)})}if("object"!==e(t)){var o=String(t);t={message:o}}if(d(t))return!1;if(b&&k&&M(b),y(t))return!1;var i;n&&(t.stack=n.stack,i=n.generator),t=r(t,{name:t.name||"Error",context:r(U.context,t.context),url:t.url||document.URL,projectRoot:t.projectRoot||t.project_root||L("projectRoot",L("project_root",window.location.protocol+"//"+window.location.host)),environment:t.environment||L("environment"),component:t.component||L("component"),action:t.action||L("action"),revision:t.revision||L("revision")}),U.addBreadcrumb("Honeybadger Notice",{category:"notice",metadata:{message:t.message,name:t.name,stack:t.stack}}),t.breadcrumbs=U.breadcrumbs.slice();var s=t.stack;return!h(U.beforeNotifyHandlers,t)&&(t.stack!=s&&(i=undefined),!u(t,L("ignorePatterns"))&&(t.generator=i,b=t,k?(I("Deferring notice",t),window.setTimeout(function(){d(t)&&M(t)})):(I("Queuing notice",t),q.push(t)),t))}function P(e,t){t||(t={});try{return"function"!=typeof e?e:v(e)?(e.___hb||(e.___hb=function(){var n=S();if(!(V&&(n||t.force)||t.force&&!n))return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(o){var a={stack:g(o)};throw U.addBreadcrumb(t.component?"".concat(t.component,": ").concat(o.name):o.name,{category:"error",metadata:{message:o.message,name:o.name,stack:a.stack}}),O(o,a),o}}),e.___hb.___hb=e.___hb,e.___hb):e}catch(n){return e}}function R(e,t,n){if(!F&&e&&t&&n&&t in e){for(var a=e[t];a&&a.__hb_original;)a=a.__hb_original;e[t]=n(a),e[t].__hb_original=a}}function D(){return U.errorsSent++}function z(){var e=L("maxErrors");return e&&U.errorsSent>=e}var F=_,j=[],q=[],U={context:{},beforeNotifyHandlers:[],afterNotifyHandlers:[],breadcrumbs:[],errorsSent:0};if("object"===e(T))for(var X in T)U[X]=T[X];var V=!0;if(window.atob||(V=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(V=!1)}catch($){}U.notify=function(t,n,a){if(t||(t={}),"[object Error]"===Object.prototype.toString.call(t)){var o=t;t=r(t,{name:o.name,message:o.message,stack:g(o)})}"object"!==e(t)&&(t={message:String(t)});n&&"object"!==e(n)&&(n={name:String(n)});return n&&(t=l(t,n)),"object"===e(a)&&(t=l(t,a)),O(t,p(t))},U.wrap=function(e){return P(e,{force:!0})},U.setContext=function(t){return"object"===e(t)&&(U.context=r(U.context,t)),U},U.resetContext=function(t){return"object"===e(t)?U.context=r({},t):U.context={},U},U.configure=function(e){for(var t in e)U[t]=e[t];return U},U.beforeNotify=function(e){return U.beforeNotifyHandlers.push(e),U},U.afterNotify=function(e){return U.afterNotifyHandlers.push(e),U};var J=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};for(var X in U.reset=function(){for(var e in U.context={},U.beforeNotifyHandlers=[],U.breadcrumbs=[],U)-1==J.call(j,e)&&(U[e]=undefined);return U.resetMaxErrors(),U},U.resetMaxErrors=function(){return U.errorsSent=0},U.getVersion=function(){return w},U.addBreadcrumb=function(e,t){if(A()){var n=s((t=t||{}).metadata),a=t.category||"custom",o=(new Date).toISOString();U.breadcrumbs.push({category:a,message:e,metadata:n,timestamp:o});var i=L("maxBreadcrumbs",40);return U.breadcrumbs.length>i&&(U.breadcrumbs=U.breadcrumbs.slice(U.breadcrumbs.length-i)),U}},window.addEventListener("click",function(e){var t,i,r;try{t=n(e.target),i=a(e.target),r=o(e.target)}catch(s){t="UI Click",i="[unknown]",r="[unknown]"}0!==t.length&&U.addBreadcrumb(t,{category:"ui.click",metadata:{selector:i,text:r,event:e}})},!0),R(XMLHttpRequest.prototype,"open",function(e){return function(){var t=this,n=arguments[1],a="string"==typeof arguments[0]?arguments[0].toUpperCase():arguments[0],o="".concat(a," ").concat(c(n));this.__hb_xhr={type:"xhr",method:a,url:n,message:o},"function"==typeof e&&e.apply(t,arguments)}}),R(XMLHttpRequest.prototype,"send",function(e){return function(){function t(){var e;4===n.readyState&&(n.__hb_xhr&&(n.__hb_xhr.status_code=n.status,e=n.__hb_xhr.message,delete n.__hb_xhr.message),U.addBreadcrumb(e||"XMLHttpRequest",{category:"request",metadata:n.__hb_xhr}))}var n=this;"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?R(n,"onreadystatechange",function(e){return function(){t(),"function"==typeof e&&e.apply(this,arguments)}}):n.onreadystatechange=t,"function"==typeof e&&e.apply(n,arguments)}}),i()&&R(window,"fetch",function(e){return function(){var t,n=arguments[0],a="GET";"string"==typeof n?t=n:"Request"in window&&n instanceof Request?(t=n.url,n.method&&(a=n.method)):t=String(n),arguments[1]&&arguments[1].method&&(a=arguments[1].method),"string"==typeof a&&(a=a.toUpperCase());var o="".concat(a," ").concat(c(t)),i={type:"fetch",method:a,url:t};return e.apply(this,arguments).then(function(e){return i.status_code=e.status,U.addBreadcrumb(o,{category:"request",metadata:i}),e})["catch"](function(e){throw U.addBreadcrumb("fetch error",{category:"error",metadata:i}),e})}}),function(){function e(e,t){n=t,U.addBreadcrumb("Page changed",{category:"navigation",metadata:{from:e,to:t}})}function t(t){return function(){var a=arguments.length>2?arguments[2]:undefined;return a&&e(n,String(a)),t.apply(this,arguments)}}var n=window.location.href;R(window,"onpopstate",function(t){return function(){if(e(n,window.location.href),t)return t.apply(this,arguments)}}),R(window.history,"pushState",t),R(window.history,"replaceState",t)}(),function(){function e(e){return Array.isArray(e)?e.map(function(e){try{return String(e)}catch(t){return"[unknown]"}}).join(" "):""}["debug","info","warn","error","log"].forEach(function(n){R(window.console,n,function(a){return function(){var o=Array.prototype.slice.call(arguments),i=e(o),r={category:"log",metadata:{level:n,arguments:t(o,3)}};U.addBreadcrumb(i,r),"function"==typeof a&&Function.prototype.apply.call(a,window.console,arguments)}})})}(),function(){function e(e){return function(t){return function(n,a){if("function"==typeof n){var o=Array.prototype.slice.call(arguments,2);return n=P(n,e),t(function(){n.apply(null,o)},a)}return t(n,a)}}}R(window,"setTimeout",e({component:"setTimeout"})),R(window,"setInterval",e({component:"setInterval"}))}(),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){var t=window[e]&&window[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(R(t,"addEventListener",function(t){var n={component:"".concat(e,".prototype.addEventListener")};return function(e,a,o,i){try{a&&null!=a.handleEvent&&(a.handleEvent=P(a.handleEvent,n))}catch(r){B(r)}return t.call(this,e,P(a,n),o,i)}}),R(t,"removeEventListener",function(e){return function(t,n,a,o){return e.call(this,t,n,a,o),e.call(this,t,P(n),a,o)}}))}),R(window,"onerror",function(e){function t(e,t,n,a,o){if(I("window.onerror callback invoked",arguments),!b&&S())if(0===n&&/Script error\.?/.test(e))B("Ignoring cross-domain script error: enable CORS to track these types of errors",arguments);else{var i,r=[e,"\n    at ? (",t||"unknown",":",n||0,":",a||0,")"].join("");o?(i={stack:g(o)}).stack||(i={stack:r}):o={name:"window.onerror",message:e,stack:r},U.addBreadcrumb("window.onerror"!==o.name&&o.name?"window.onerror: ".concat(o.name):"window.onerror",{category:"error",metadata:{message:o.message,name:o.name,stack:i?i.stack:o.stack}}),O(o,i)}}return function(n,a,o,i,r){return t(n,a,o,i,r),!("function"!=typeof e||!L("_onerror_call_orig",!0))&&e.apply(this,arguments)}}),R(window,"onunhandledrejection",function(e){function t(e){if(I("window.onunhandledrejection callback invoked",arguments),!b&&C()){var t=e.reason;if(t instanceof Error){var n=t.fileName||"unknown",a=t.lineNumber||0,o="".concat(t.message,"\n    at ? (").concat(n,":").concat(a,")"),i=g(t)||o,r={name:t.name,message:"UnhandledPromiseRejectionWarning: ".concat(t),stack:i};return U.addBreadcrumb("window.onunhandledrejection: ".concat(r.name),{category:"error",metadata:r}),void O(r)}var s="string"==typeof t?t:JSON.stringify(t);O({name:"window.onunhandledrejection",message:"UnhandledPromiseRejectionWarning: ".concat(s)})}}return function(n){t(n),"function"==typeof e&&e.apply(this,arguments)}}),_=!0,U)j.push(X);if(I("Initializing honeybadger.js "+w),/complete|interactive|loaded/.test(document.readyState))k=!0,I("honeybadger.js "+w+" ready");else{I("Installing ready handler");var W=function(){var e;for(k=!0,I("honeybadger.js "+w+" ready");e=q.pop();)M(e)};document.addEventListener?document.addEventListener("DOMContentLoaded",W,!0):window.attachEvent("onload",W)}return U}}var m=u(),f=m();return f.factory=m,f}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js",{scope:"/"}).then(function(){})["catch"](e=>{console.log("ServiceWorker registration failed: ",e)}),window.addEventListener("beforeinstallprompt",e=>{e.userChoice.then(e=>{ga("send","event","PWA-install",e.outcome)})});var instantClick,InstantClick=instantClick=function(e,t,n){function a(e){var t=e.indexOf("#");return t<0?e:e.substr(0,t)}function o(e){for(;e&&"A"!=e.nodeName;)e=e.parentNode;return e}function i(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-instant"))return!1;if(e.hasAttribute("data-no-instant"))return!0}while(e=e.parentNode);return!1}function r(e){var n=t.protocol+"//"+t.host;return!(e.target||e.hasAttribute("download")||0!=e.href.indexOf(n+"/")||e.href.indexOf("#")>-1&&a(e.href)==L||i(e))}function s(e,t,n,a){for(var o=!1,i=0;i<U[e].length;i++)if("receive"==e){var r=U[e][i](t,n,a);r&&("body"in r&&(n=r.body),"title"in r&&(a=r.title),o=r)}else U[e][i](t,n,a);return o}function c(t,n,o,i,r){var c=e.getElementById("page-content");if(e.getElementById("navigation-butt")&&e.getElementById("navigation-butt").classList.remove("showing"),e.getElementsByTagName("BODY")[0].replaceChild(n,c),e.getElementById("navigation-progress").classList.remove("showing"),o){history.pushState(null,null,o.replace("?samepage=true","").replace("&samepage=true",""));var l=o.indexOf("#"),d=l>-1&&e.getElementById(o.substr(l+1)),u=0,m=o.indexOf("samepage=true")>-1;if(d)for(;d.offsetParent;)u+=d.offsetTop,d=d.offsetParent;m||scrollTo(0,u),L=a(o)}else scrollTo(0,i);H&&e.title==t?e.title=t+String.fromCharCode(160):e.title=t,b(),r?s("restore"):s("change",!1)}function l(){F=!1,j=!1}function d(e){return e.replace(/<noscript[\s\S]+?<\/noscript>/gi,"")}function u(e){if(!(A>+new Date-500)){var t=o(e.target);t&&r(t)&&w(t.href)}}function m(e){if(!(A>+new Date-500)){var t=o(e.target);t&&r(t)&&(t.addEventListener("mouseout",p),M?(S=t.href,C=setTimeout(w,M)):w(t.href),getImageForLink(t))}}function f(e){A=+new Date;var t=o(e.target);t&&r(t)&&(N?t.removeEventListener("mousedown",u):t.removeEventListener("mouseover",m),w(t.href),getImageForLink(t))}function g(e){try{var t=o(e.target);if(!t||!r(t))return;if(e.which>1||e.metaKey||e.ctrlKey)return;if(_(t.href),e.preventDefault(),window.ga&&ga.create&&t.hasAttribute("data-featured-article")){var n=t.dataset.featuredArticle;ga("send","event","click","featured-feed-click",n,null)}}catch(a){console.log(a)}}function p(){if(C)return clearTimeout(C),void(C=!1);F&&!j&&(x.abort(),l())}function h(){y(x,P)}function y(t,n){if(!(t.readyState<4)&&0!=t.status){if(z.ready=+new Date-z.start,e.getElementById("page-content")&&200===t.status&&t.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var o=e.implementation.createHTMLDocument("");o.documentElement.innerHTML=d(t.responseText);var i=o.title,r=o.getElementById("page-content"),c=s("receive",n,r,i);c&&("body"in c&&(r=c.body),"title"in c&&(i=c.title)),D[n]={body:r,title:i};a(n);for(var l,u,m=o.head.children,f=0,g=0;g<m.length;g++)if((l=m[g]).hasAttribute("data-instant-track")){u=l.getAttribute("href")||l.getAttribute("src")||l.innerHTML;for(var p=0;p<q.length;p++)q[p]==u&&f++}f!=q.length&&(R=!0)}else R=!0;j&&P===n&&(j=!1,_(P))}}function v(){var n=a(t.href);n!=L&&(n in O?(O[L]={body:e.getElementById("page-content"),title:e.title,scrollY:pageYOffset},L=n,c(O[n].title,O[n].body,!1,O[n].scrollY,!0)):t.href=t.href)}function b(t){if(e.body&&(e.body.addEventListener("touchstart",f,!0),N?e.body.addEventListener("mousedown",u,!0):e.body.addEventListener("mouseover",m,!0),e.body.addEventListener("click",g,!0)),!t)for(var n,a,o,i,r=e.body.getElementsByTagName("script"),s=0,c=r.length;s<c;s++)(n=r[s]).hasAttribute("data-no-instant")||(a=e.createElement("script"),n.src&&(a.src=n.src),n.innerHTML&&(a.innerHTML=n.innerHTML),o=n.parentNode,i=n.nextSibling,o.removeChild(n),o.insertBefore(a,i))}function w(e,t){if(!(!N&&"display"in z&&+new Date-(z.start+z.display)<100)&&(C&&(clearTimeout(C),C=!1),e||(e=S),!F||e!=P&&!j)){if(F=!0,j=!1,R=!1,z={start:+new Date},-1==e.indexOf("?"))var n=e+"?i=i";else n=e+"&i=i";E(),s("fetch"),D[e]||("force"===t?k(e,function(){y(this,e)}):(P=e,x.open("GET",n),x.send()))}}function E(e){(Object.keys(D).length>13||"force"==e)&&(D={})}function k(e,t){var n=new XMLHttpRequest;if(-1==e.indexOf("?"))var a=e+"?i=i";else a=e+"&i=i";n.open("GET",a,!0),n.onreadystatechange=function(){4==n.readyState&&"function"==typeof t&&t.apply(n)},n.send()}function _(n){if(P=n,D[n])var a=D[n].body,o=D[n].title;else e.getElementById("navigation-progress").classList.add("showing");if("display"in z||(z.display=+new Date-z.start),C||!F)return C&&P&&P!=n?void(t.href=n):(w(n),s("wait"),void(j=!0));if(j)t.href=n;else if(R)t.href=P;else{if(!a)return s("wait"),void(j=!0);O[L]={body:e.getElementById("page-content"),title:e.title,scrollY:pageYOffset},l(),c(o,a,P)}}function T(n){if(!L)if(X){"mousedown"==n?N=!0:"number"==typeof n&&(M=n),L=a(t.href),O[L]={body:e.getElementById("page-content"),title:e.title,scrollY:pageYOffset};for(var o,i,r=e.head.children,c=0;c<r.length;c++)(o=r[c]).hasAttribute("data-instant-track")&&(i=o.getAttribute("href")||o.getAttribute("src")||o.innerHTML,q.push(i));(x=new XMLHttpRequest).addEventListener("readystatechange",h),b(!0),s("change",!0),addEventListener("popstate",v),I()}else s("change",!0)}function B(e,t){U[e].push(t)}function I(){if("ontouchstart"in e.documentElement){var t=e.createElement("script");t.src="https://practicaldev-herokuapp-com.freetls.fastly.net/assets/lib/pulltorefresh-3c437bc4ceb3e994b3d136ca7127bff6690e963445fb1c3ab28b93c3e84ecd7c.js",e.head.appendChild(t);var n=setInterval(function(){if("undefined"!=typeof PullToRefresh){PullToRefresh.init({mainElement:"body",passive:!0,onRefresh:function(){window.location.reload()}});clearInterval(n)}},1)}}var L,S,C,A,x,N,M,H=n.indexOf(" CriOS/")>-1,O={},P=!1,R=!1,D={},z={},F=!1,j=!1,q=[],U={fetch:[],receive:[],wait:[],change:[],restore:[]},X="pushState"in history&&(!n.match("Android")||n.match("Chrome/")||n.match("Firefox/"))&&"file:"!=t.protocol;return{supported:X,init:T,isPreloadable:r,preload:w,removeExpiredKeys:E,display:_,on:B}}(document,location,navigator.userAgent);Honeybadger.configure({apiKey:"a45862f6",environment:"production",revision:"300ba1b33fbd511cc70ef36a9e7667e24062c8b2"}),initializeBaseApp();